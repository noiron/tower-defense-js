{"version":3,"sources":["webpack:///webpack/bootstrap 6997f83befc3b234adf8","webpack:///./src/constants.ts","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./src/utils/index.js","webpack:///./node_modules/gl-matrix/esm/index.js","webpack:///./src/entities/towers/BaseTower.ts","webpack:///./src/id.ts","webpack:///./src/utils/config.ts","webpack:///./src/entities/towers/index.ts","webpack:///./src/index.js","webpack:///./node_modules/gl-matrix/esm/mat3.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/gl-matrix/esm/quat.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./src/EntityCollection.ts","webpack:///./src/Game.ts","webpack:///./node_modules/gl-matrix/esm/mat2.js","webpack:///./node_modules/gl-matrix/esm/mat2d.js","webpack:///./node_modules/gl-matrix/esm/quat2.js","webpack:///./node_modules/gl-matrix/esm/vec2.js","webpack:///./src/entities/bullets/CircleBullet.ts","webpack:///./src/entities/towers/BulletTower.ts","webpack:///./src/entities/bullets/Bullet.ts","webpack:///./src/entities/towers/LaserTower.ts","webpack:///./src/entities/bullets/Laser.ts","webpack:///./src/entities/towers/SlowTower.ts","webpack:///./src/entities/bullets/SlowField.ts","webpack:///./src/entities/towers/FireTower.ts","webpack:///./src/entities/bullets/FireZone.ts","webpack:///./src/entities/towers/Block.ts","webpack:///./src/entities/Enemy.ts","webpack:///./src/entities/Map.ts","webpack:///./src/entities/Path.js","webpack:///./src/utils/BreadthFirstSearch.js","webpack:///./src/Wave.ts","webpack:///./src/entities/Message.ts","webpack:///./src/entities/GameControl.ts","webpack:///./src/entities/GameInfo.ts","webpack:///./src/entities/GameError.ts","webpack:///./src/audio.js","webpack:///./assets/audios/short.mp3","webpack:///./src/styles/index.less?c6b0","webpack:///./src/styles/index.less","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js"],"names":["WIDTH","HEIGHT","GAME_CONTROL_WIDTH","GAME_CONTROL_HEIGHT","GRID_SIZE","gridWidth","gridHeight","gridNumX","gridNumY","FRAMERATE","OFFSET_X","OFFSET_Y","towerData","BASE","cost","info","LASER","SLOW","FIRE","BLOCK","BULLETS","LINE","CIRCLE","toRadians","angle","Math","PI","calculateDistance","x1","y1","x2","y2","result","sqrt","vec2","limit","out","v","high","x","y","len","normalize","scale","isInside","pos","rect","width","height","highlightGrid","ctx","LW","innerWidth","innerHeight","lowRatio","upRatio","save","strokeStyle","lineWidth","beginPath","moveTo","lineTo","closePath","stroke","restore","index2Px","col","row","gridSize","offsetX","offsetY","px2Index","floor","drawGrid","cols","rows","i","BaseTower","id","bullets","selected","damage","radius","type","level","barrelLength","hue","lastShootTime","Date","shootInterval","direction","bulletStartPosVec","fromValues","directionVec","create","targetIndex","target","targetId","range","upgradeGain","upgradeCost","cos","sin","shoot","step","config","renderShadow","shadowBlur","shadowColor","fillStyle","arc","fill","max","push","Bullet","globalId","genId","enemies","prevTgt","getElementById","length","enemy","abs","color","atan2","value","getLength","cfgPlayAudio","orbit","MAP_SETTING","TowerFactory","BULLET","BulletTower","LaserTower","SlowTower","FireTower","Block","stage","game","beginGame","Game","element","document","world","window","BORDER_WIDTH","canvas","getContext","backgroundCanvas","bgCtx","gameControlCanvas","panels","gameInfoCanvas","errorMsgCanvas","chooseStage","chooseStageButtons","getElementsByClassName","Array","prototype","forEach","call","b","addEventListener","chooseStageHandler","status","e","dataset","style","display","windowResizeHandler","cvx","cvy","position","left","top","renderBackground","gradient","createRadialGradient","addColorStop","fillRect","EntityCollection","removed","splice","idx","startButton","backButton","$chooseStage","opt","init","bindEvent","initData","startButtonClickHandler","bind","backButtonClickHandler","gameControlEle","gameControl","GameControl","draw","$gameInfo","gameInfo","GameInfo","$gameError","gameError","GameError","clear","towers","money","enemyCreatedCount","lastCreatedEnemyTime","newTowerCoord","map","Map","tower","mode","addTowerType","score","life","towerSelect","towerSelectIndex","towerSelectId","wave","waves","frames","timeLastSecond","getTime","fps","fpsRate","time","destroy","stopPropagation","stopAnim","clearRect","cancelAnimationFrame","animId","calculateFPS","gameOver","shouldGenerateWave","generateWave","shouldGenerateEnemy","cfg","generateEnemy","basePos","Enemy","random","speed","health","path","dead","reachDest","removeElementById","beepAudio","play","index","findTarget","detectImpact","bullet","bulletOutOfBound","removeElementByIndex","parent","shooting","coord","drawGhostTower","requestAnimationFrame","impact","distance","j","distBulletToEnemy","buff","every","source","duration","includes","towerType","console","log","showError","checkPath","findPath","findPointPath","wp","dx","dy","dist","angleFlag","oncontextmenu","preventDefault","onclick","getBoundingClientRect","clientX","clientY","createNewTower","onmousemove","cursorX","pageX","cursorY","pageY","waveFinish","Wave","title","innerHTML","frameTime","min","round","statusText","message","Message","text","messages","start","CircleBullet","vx","vy","curDis","velocity","bulletVec","end","add","laserId","findIndex","Laser","ratio","counter","slowField","SlowField","minRange","maxRange","maxLife","calcRange","minR","maxR","timePassed","timeStop","fireZone","FireZone","halfSize","maxHealth","wpX","wpY","drawHealth","Path","mapSetting","blockArray","block","setPoints","setMap","current","next","minY","maxY","minX","maxX","graph","Graph","walls","startPoint","endPoint","bfs","BreadthFirstSearch","pathArr","p","startArr","points","addPoint","PATH_COLOR","lineJoin","lineCap","point","w","h","node","wall","results","filter","passable","inBounds","hasNode","Queue","elements","shift","frontier","put","visited","cameFrom","curNeighbors","empty","get","neighbors","curX","curY","some","item","removeNode","find","enemyInitCnt","a","c","enemyCnt","Object","keys","key","enemyCfg","startTime","vanish","font","fillText","GRID_WIDTH","GRID_HEIGHT","GRID_NUM_X","GRID_NUM_Y","FILL_COLOR","DISABLE_COLOR","HOVER_COLOR","TOWER_TYPE","option","assign","towerAreaRect","commonBtnProp","pauseBtn","upgradeBtn","disable","sellBtn","towerArea","TowerArea","drawText","drawButton","drawSelectedTowerInfo","btn","strokeRect","toFixed","$element","$","click","$canvas","offset","xIdx","yIdx","sellTower","upgradeTower","mousemove","infoX","data","infos","baseTower","laserTower","slowTower","fireTower","highlightTower","count","setTimeout","textStartX","textWidth","measureText","t","msg","Audio","beep"],"mappings":"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,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,cAAc;AACzB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB;AACA,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB;AACA,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB;AACttB;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO,mB;;;;;;;ACzwBP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;;AAEnC,MAAM,8DAAmB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,2DAAgB;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA,YAAY,2DAAgB;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,cAAc;AACzB,aAAa,KAAK;AAClB;;AAEO;AACP,wBAAwB,8DAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,aAAa;AACzB,YAAY,KAAK;AACjB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,aAAa;AACzB,YAAY,KAAK;AACjB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,YAAY,KAAK;AACjB;;AAEO;AACP,oBAAoB,8DAAmB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB;AACA,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,2DAAgB,+BAA+B,2DAAgB,+BAA+B,2DAAgB;AAC/I;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,uEAAuE,2DAAgB,yEAAyE,2DAAgB,yEAAyE,2DAAgB,yEAAyE,2DAAgB,yEAAyE,2DAAgB,yEAAyE,2DAAgB;AAC/zC;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO,mB;;;;;;;ACrxDP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACN;AACA;AACA;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;;AAEnC,MAAM,8DAAmB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,aAAa;AACzB,YAAY,OAAO;AACnB;;AAEO;AACP;AACA;;AAEA,UAAU,2DAAgB;AAC1B;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,aAAa;AACzB,YAAY,aAAa;AACzB,YAAY,OAAO;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;;AAE1C,gDAAgD;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH,oBAAoB,2DAAgB;AACpC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA,WAAW,0DAAe;AAC1B,WAAW,0DAAe;AAC1B,WAAW,0DAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC;;AAEpC;AACA,wBAAwB;;AAExB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,KAAK;AAClB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;AACA;;AAEO,YAAY,uDAAU;AAC7B;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;;AAEO,iBAAiB,4DAAe;AACvC;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;AACA;;AAEO,WAAW,sDAAS;AAC3B;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;;AAEO,UAAU,qDAAQ;AACzB;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;AACA;;AAEO,UAAU,qDAAQ;AACzB;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;;AAEO,YAAY,uDAAU;AAC7B;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;AACA;;AAEO,UAAU,qDAAQ;AACzB;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;;AAEO,WAAW,sDAAS;AAC3B;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO,aAAa,wDAAW;AAC/B;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;AACA;;AAEO,oBAAoB,+DAAkB;AAC7C;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;AACA;;AAEO,gBAAgB,2DAAc;AACrC;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO,kBAAkB,6DAAgB;AACzC;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO,aAAa,wDAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,wDAAW;AAC3B,kBAAkB,4DAAe;AACjC,kBAAkB,4DAAe;AACjC;AACA,cAAc,qDAAQ;;AAEtB;AACA,MAAM,uDAAU;AAChB,UAAU,qDAAQ,sBAAsB,uDAAU;AAClD,MAAM,2DAAc;AACpB;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,MAAM,uDAAU;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP,aAAa,wDAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,G;;;;;;;ACrsBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;;AAEnC,MAAM,8DAAmB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,UAAU,0DAAe;AACzB,UAAU,0DAAe;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,aAAa;;AAEb;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,qDAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,aAAa;;AAEb;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,qDAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,aAAa;;AAEb;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB;AACxN;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC,G;;;;;;;AClxBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;;AAEnC,MAAM,8DAAmB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP,uBAAuB;AACvB;AACA;;AAEA;AACA;;AAEA;AACA,SAAS,0DAAe;AACxB,SAAS,0DAAe;AACxB;AACA,GAAG;;AAEH;AACA,SAAS,0DAAe;AACxB,SAAS,0DAAe;AACxB;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA,qCAAqC;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB;AAC7S;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAE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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;;AAEnC,MAAM,8DAAmB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA,gBAAgB;;AAEhB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB;AAC7S;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO,mB;;;;;;;AC/aP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,8DAAmB;;AAEnC,MAAM,8DAAmB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB;AACvd;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO,mB;;;;;;;ACreP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACN;AACA;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,eAAe,8DAAmB;;AAElC,MAAM,8DAAmB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP,eAAe,8DAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP,eAAe,8DAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP,eAAe,8DAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA,cAAc,wDAAW;AACzB,EAAE,6DAAgB;AAClB,cAAc,8DAAmB;AACjC,EAAE,gEAAmB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,cAAc;AAC1B,YAAY,KAAK;AACjB;;AAEO,cAAc,sDAAS;AAC9B;AACA;AACA,YAAY,KAAK;AACjB,YAAY,cAAc;AAC1B,YAAY,KAAK;AACjB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEO,cAAc,sDAAS;AAC9B;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,YAAY,cAAc;AAC1B,YAAY,KAAK;AACjB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,yDAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,yDAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,yDAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,aAAa;AACxB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,sBAAsB,2DAAgB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO,UAAU,qDAAQ;AACzB;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO,aAAa,wDAAW;AAC/B;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO,oBAAoB,+DAAkB;AAC7C;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB,qEAAqE,2DAAgB;AACjoB,C;;;;;;;ACl0BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;;AAEnC,MAAM,8DAAmB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP,gBAAgB,8DAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA,UAAU,0DAAe;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,cAAc;AACzB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;;AAE5C;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,KAAK;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,aA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oB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,EAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6997f83befc3b234adf8","export const WIDTH = 800;\nexport const HEIGHT = 650;\n\nexport const GAME_CONTROL_WIDTH = 230;\nexport const GAME_CONTROL_HEIGHT = 650;\n\nexport const GRID_SIZE = 50;\nexport const gridWidth: number = GRID_SIZE;\nexport const gridHeight: number = GRID_SIZE;\n\nexport const gridNumX = 15; // x轴方向上的格子数目\nexport const gridNumY = 11; // y轴方向上的格子数目\n\nexport const FRAMERATE = 60;\n\nexport const OFFSET_X = 25;\nexport const OFFSET_Y = 50;\n\ninterface TowerItem {\n  cost: number;\n  info: string;\n}\n\ninterface TowerData {\n  BASE: TowerItem;\n  LASER: TowerItem;\n  SLOW: TowerItem;\n  FIRE: TowerItem;\n  BLOCK: TowerItem;\n  [index: string]: TowerItem;\n}\n\nexport const towerData: TowerData = {\n  BASE: {\n    cost: 200,\n    info: '子弹塔：沙包大的子弹见过没有？',\n  },\n  LASER: {\n    cost: 200,\n    info: '激光塔：哎哟，不错！',\n  },\n  SLOW: {\n    cost: 600,\n    info: '减速塔：Yo, Yo, Yo, 留下来！',\n  },\n  FIRE: {\n    cost: 400,\n    info: '火焰塔：啊哈，你想被烤成几分熟？',\n  },\n  BLOCK: {\n    cost: 50,\n    info: '',\n  },\n};\n\nexport const BULLETS = {\n  LINE: 'line',\n  CIRCLE: 'circle',\n  SLOW: 'slow',\n  FIRE: 'fire',\n  LASER: 'laser',\n};\ntype BULLET_KEYS = keyof typeof BULLETS;\nexport type BULLET_TYPE = typeof BULLETS[BULLET_KEYS];\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.ts","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/common.js\n// module id = 1\n// module chunks = 0","import { vec2 } from 'gl-matrix';\nimport { GRID_SIZE, OFFSET_X, OFFSET_Y } from '@/constants';\n\nexport function toRadians(angle) {\n  return angle * (Math.PI / 180);\n}\n\n// Array Remove - By John Resig (MIT Licensed)\n// Array.prototype.remove = function (from, to) {\n//   let rest = this.slice((to || from) + 1 || this.length);\n//   this.length = from < 0 ? this.length + from : from;\n//   return this.push.apply(this, rest);\n// };\n\nexport function calculateDistance(x1, y1, x2, y2) {\n  const result = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n  return result;\n}\n\n// Make sure v is smaller than high\nvec2.limit = function (out, v, high) {\n  'use strict';\n\n  let x = v[0],\n    y = v[1];\n\n  let len = x * x + y * y;\n\n  if (len > high * high && len > 0) {\n    out[0] = x;\n    out[1] = y;\n    vec2.normalize(out, out);\n    vec2.scale(out, out, high);\n  }\n  return out;\n};\n\nexport function isInside(pos, rect) {\n  return (\n    pos.x > rect.x &&\n    pos.x < rect.x + rect.width &&\n    pos.y < rect.y + rect.height &&\n    pos.y > rect.y\n  );\n}\n\n/**\n *\n * @param {*} ctx\n * @param {*} x  top left x coordinate\n * @param {*} y  top left y coordinate\n * @param {*} WIDTH grid's width\n * @param {*} HEIGHT grid's height\n *       ____\n *      |    |\n *      |____|\n */\nexport function highlightGrid(ctx, x, y, WIDTH, HEIGHT) {\n  const LW = 3; // lineWidth\n  const innerWidth = WIDTH - LW;\n  const innerHeight = HEIGHT - LW;\n  const lowRatio = 0.35;\n  const upRatio = 1 - lowRatio;\n\n  ctx.save();\n  ctx.strokeStyle = 'pink';\n  ctx.lineWidth = LW;\n\n  ctx.beginPath();\n  ctx.moveTo(x + LW, y + LW);\n  ctx.lineTo(x + lowRatio * WIDTH + LW, y + LW);\n\n  ctx.moveTo(x + upRatio * WIDTH, y + LW);\n  ctx.lineTo(x + innerWidth, y + LW);\n  ctx.lineTo(x + innerWidth, y + lowRatio * HEIGHT);\n\n  ctx.moveTo(x + innerWidth, y + upRatio * HEIGHT - LW);\n  ctx.lineTo(x + innerWidth, y + innerHeight);\n  ctx.lineTo(x + upRatio * WIDTH, y + innerHeight);\n\n  ctx.moveTo(x + lowRatio * WIDTH, y + innerHeight);\n  ctx.lineTo(x + LW, y + innerHeight);\n  ctx.lineTo(x + LW, y + upRatio * HEIGHT - LW);\n\n  ctx.moveTo(x + LW, y + lowRatio * HEIGHT);\n  ctx.lineTo(x + LW, y + LW);\n\n  ctx.closePath();\n  ctx.stroke();\n  ctx.restore();\n}\n\n/**\n * 根据一个格子的行和列，计算出其中心在坐标系中用像素表示的坐标\n * @param {number} col 处于第几列，对应于x坐标\n * @param {number} row 处于第几行，对应于y坐标\n */\nexport function index2Px(col, row, gridSize = GRID_SIZE) {\n  const offsetX = OFFSET_X;\n  const offsetY = OFFSET_Y;\n\n  const x = col * gridSize + gridSize * 0.5 + offsetX;\n  const y = row * gridSize + gridSize * 0.5 + offsetY;\n\n  return { x, y };\n}\n\n/**\n * 根据一个点在canvas上的像素坐标，计算出其所在格子的行和列\n * @param {number} x x坐标\n * @param {number} y y坐标\n */\nexport function px2Index(x, y, gridSize = GRID_SIZE) {\n  const offsetX = OFFSET_X;\n  const offsetY = OFFSET_Y;\n\n  const col = Math.floor((x - offsetX) / gridSize);\n  const row = Math.floor((y - offsetY) / gridSize);\n\n  return { col, row };\n}\n\nexport function drawGrid(\n  ctx,\n  cols,\n  rows,\n  gridSize = GRID_SIZE,\n  strokeStyle = '#aaa',\n  offsetX = 0,\n  offsetY = 0\n) {\n  ctx.strokeStyle = strokeStyle;\n  ctx.lineWidth = 1;\n  ctx.beginPath();\n\n  // Draw vertical lines\n  ctx.moveTo(offsetX - 0.5, offsetY);\n  ctx.lineTo(offsetX - 0.5, rows * gridSize + offsetY);\n  for (let i = 0; i < cols + 1; i++) {\n    ctx.moveTo(i * gridSize - 0.5 + offsetX, offsetY);\n    ctx.lineTo(i * gridSize - 0.5 + offsetX, rows * gridSize + offsetY);\n  }\n  ctx.stroke();\n\n  // Draw horizontal lines\n  ctx.moveTo(offsetX, offsetY - 0.5);\n  ctx.lineTo(cols * gridSize + offsetX, offsetY - 0.5);\n  for (let i = 0; i < rows + 1; i++) {\n    ctx.moveTo(offsetX, i * gridSize - 0.5 + offsetY);\n    ctx.lineTo(cols * gridSize + offsetX, i * gridSize - 0.5 + offsetY);\n  }\n  ctx.stroke();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","import * as glMatrix from \"./common.js\";\nimport * as mat2 from \"./mat2.js\";\nimport * as mat2d from \"./mat2d.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as mat4 from \"./mat4.js\";\nimport * as quat from \"./quat.js\";\nimport * as quat2 from \"./quat2.js\";\nimport * as vec2 from \"./vec2.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/index.js\n// module id = 3\n// module chunks = 0","/**\n * 用于发射圆形子弹的塔\n */\n\nimport Bullet from '../bullets/CircleBullet';\nimport { vec2 } from 'gl-matrix';\nimport { toRadians, calculateDistance, px2Index } from '../../utils';\nimport { config } from '@/utils/config';\nimport { GRID_SIZE, towerData } from '@/constants';\nimport globalId from '@/id';\nimport Enemy from '../Enemy';\n\nexport default class BaseTower {\n  id: number;\n  ctx: CanvasRenderingContext2D;\n  x: number;\n  y: number;\n  type: string;\n  level: number;\n  col: number;\n  row: number;\n  radius: number;\n  barrelLength: number;\n  hue: number;\n  bullets: Bullet[];\n  cost: number;\n  lastShootTime: Date;\n  shootInterval: number;\n  direction: number;\n  bulletStartPosVec: vec2;\n  directionVec: vec2;\n  targetIndex: number;\n  target: Enemy;\n  targetId: number;\n  range: number;\n  selected: boolean;\n  damage: number;\n  upgradeGain: number;\n  upgradeCost: number;\n\n  constructor({ id, ctx, x, y, bullets, selected, damage, radius }: any) {\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.ctx = ctx;\n    this.type = 'BASE';\n    this.level = 1;\n    const { col, row } = px2Index(x, y);\n    this.col = col;\n    this.row = row;\n    this.radius = radius || 10;\n    this.barrelLength = 2;\n    this.hue = 200;\n    this.bullets = bullets;\n    this.cost = towerData[this.type].cost;\n    this.lastShootTime = new Date();\n    this.shootInterval = 500; // 发射间隔，单位ms\n    this.direction = 180; // 用度数表示的tower指向\n    this.bulletStartPosVec = vec2.fromValues(0, 0);\n    this.directionVec = vec2.create();\n    this.targetIndex = -1;\n    this.target = null;\n    this.targetId = -1;\n    this.range = 4 * GRID_SIZE;\n    this.selected = selected || false;\n    this.damage = damage || 5;\n    this.upgradeGain = damage * 0.4; // 升级后的伤害增益\n    this.upgradeCost = this.cost * 0.6;\n  }\n\n  step() {\n    // 将方向向量归一化\n    this.directionVec = vec2.fromValues(\n      Math.cos(toRadians(this.direction)),\n      Math.sin(toRadians(this.direction))\n    );\n    vec2.normalize(this.directionVec, this.directionVec);\n\n    // bullet 出射位置\n    vec2.scale(\n      this.bulletStartPosVec,\n      this.directionVec,\n      this.radius * this.barrelLength\n    );\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (new Date() - this.lastShootTime >= this.shootInterval) {\n      this.shoot();\n      this.lastShootTime = new Date();\n    }\n  }\n\n  draw() {\n    this.step();\n    const ctx = this.ctx;\n\n    ctx.save();\n    if (config.renderShadow) {\n      ctx.shadowBlur = this.radius;\n      ctx.shadowColor = 'hsl(' + this.hue + ',100%,60%)';\n    }\n\n    // 在选中的情况下，画出其射程范围\n    if (this.selected) {\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(200, 200, 200, 0.3)';\n      ctx.arc(this.x, this.y, this.range, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = 'hsl(' + this.hue + ',100%, 40%';\n    ctx.fillStyle = 'hsl(' + this.hue + ',100%, 40%';\n    ctx.lineWidth = Math.max(5, this.radius / 6);\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.closePath();\n    // ctx.stroke();\n    ctx.fill();\n\n    ctx.beginPath();\n    ctx.moveTo(this.x, this.y);\n    ctx.lineTo(\n      this.x + this.bulletStartPosVec[0],\n      this.y + this.bulletStartPosVec[1]\n    );\n    ctx.stroke();\n    ctx.closePath();\n\n    // this.direction = (this.direction + 0.6) % 360;\n\n    ctx.restore();\n  }\n\n  // 发射子弹\n  shoot() {\n    if (this.target) {\n      this.bullets.push(\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        new Bullet({\n          id: globalId.genId(),\n          target: this.target,\n          ctx: this.ctx,\n          x: this.x + this.bulletStartPosVec[0],\n          y: this.y + this.bulletStartPosVec[1],\n          range: this.range,\n          damage: this.damage,\n        })\n      );\n    }\n  }\n\n  findTarget(enemies: Enemy[]) {\n    // 先判断原有的target是否仍在范围内\n    if (this.target !== null) {\n      // @ts-ignore\n      const prevTgt = enemies.getElementById(this.target.id);\n      if (prevTgt) {\n        if (\n          calculateDistance(prevTgt.x, prevTgt.y, this.x, this.y) < this.range\n        ) {\n          return;\n        }\n      }\n    }\n\n    // 去寻找一个新的target\n    this.targetIndex = -1;\n    this.targetId = -1;\n    this.target = null;\n\n    for (let i = 0, len = enemies.length; i < len; i++) {\n      const enemy = enemies[i];\n      if (\n        Math.abs(enemy.x - this.x) + Math.abs(enemy.y - this.y) >\n        this.range\n      ) {\n        // 简化计算\n        continue;\n      } else {\n        if (calculateDistance(enemy.x, enemy.y, this.x, this.y) < this.range) {\n          if (this.target) {\n            this.target.color = 0;\n          }\n          this.targetIndex = i;\n          this.target = enemies[i];\n          this.targetId = enemies[i].id;\n          break;\n        }\n      }\n    }\n\n    if (this.targetIndex !== -1) {\n      // @ts-ignore\n      const target = enemies.getElementById(this.targetId);\n      if (target) {\n        this.directionVec = vec2.fromValues(\n          target.x - this.x,\n          target.y - this.y\n        );\n        this.direction =\n          Math.atan2(target.y - this.y, target.x - this.x) * (180 / Math.PI);\n\n        // target.color = 'red';\n      }\n      return target;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/towers/BaseTower.ts","class globalId {\n  value: Array<number>;\n\n  constructor() {\n    this.value = [];\n  }\n\n  genId() {\n    if (this.getLength() === 0) {\n      this.value.push(0);\n      return 0;\n    } else {\n      const id = this.value[this.getLength() - 1] + 1;\n      this.value.push(id);\n      return id;\n    }\n  }\n\n  getLength() {\n    return this.value.length;\n  }\n\n  clear() {\n    this.value = [];\n  }\n}\n\nexport default new globalId();\n\n\n\n// WEBPACK FOOTER //\n// ./src/id.ts","import { gridNumX, gridNumY } from '@/constants';\n\nexport const config = {\n  renderShadow: false,\n};\n\nexport const cfgPlayAudio = false;\n\nconst cols: number = gridNumX; // 16\nconst rows: number = gridNumY; // 12\n\n// 地图路径坐标\nexport const orbit = {\n  1: [\n    [1, 0],\n    [1, rows - 1],\n  ],\n  2: [\n    [0, 1],\n    [cols - 4, 1],\n    [cols - 4, 4],\n    [6, 4],\n    [6, 8],\n    [cols - 2, 8],\n    [cols - 2, rows - 1],\n    [0, rows - 1],\n  ],\n  3: [\n    [6, 0],\n    [6, 5],\n    [8, 5],\n    [8, rows - 1],\n  ],\n};\n\nexport const MAP_SETTING = {\n  3: {\n    BLOCK: [\n      [5, 3],\n      [5, 4],\n      [6, 4],\n      [7, 4],\n      [8, 4],\n      [7, 8],\n      [8, 8],\n      [9, 8],\n    ],\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/config.ts","import BaseTower from './BaseTower';\nimport BulletTower from './BulletTower';\nimport LaserTower from './LaserTower';\nimport SlowTower from './SlowTower';\nimport FireTower from './FireTower';\nimport Block from './Block';\n\nconst TowerFactory = {\n  BASE: BaseTower,\n  BULLET: BulletTower,\n  LASER: LaserTower,\n  SLOW: SlowTower,\n  FIRE: FireTower,\n  BLOCK: Block\n};\n\nexport {\n  BaseTower,\n  BulletTower,\n  LaserTower,\n  SlowTower,\n  FireTower,\n  Block\n};\n\nexport default TowerFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/entities/towers/index.ts","import Game from './Game';\nimport {\n  WIDTH,\n  HEIGHT,\n  GAME_CONTROL_WIDTH,\n  GAME_CONTROL_HEIGHT,\n} from '@/constants';\nimport './styles/index.less';\nlet stage = 1;\nlet game = {};\n\nfunction beginGame() {\n  game = new Game({\n    element: document.getElementById('drawing'),\n    stage,\n  });\n  world.game = game;\n  world.stage = stage;\n\n  // FIXME: JUST FOR DEBUG\n  window.game = game;\n}\n\n// 游戏的全部状态保存在该对象中\nexport const world = {};\nwindow.world = world;\n\nconst BORDER_WIDTH = 6;\n\nconst canvas = document.getElementById('drawing');\nconst ctx = canvas.getContext('2d');\ncanvas.width = WIDTH;\ncanvas.height = HEIGHT;\n\nconst backgroundCanvas = document.getElementById('background');\nconst bgCtx = backgroundCanvas.getContext('2d');\nbackgroundCanvas.width = WIDTH + GAME_CONTROL_WIDTH;\nbackgroundCanvas.height = HEIGHT;\n\nconst gameControlCanvas = document.getElementById('game-control');\ngameControlCanvas.width = GAME_CONTROL_WIDTH;\ngameControlCanvas.height = GAME_CONTROL_HEIGHT;\n\nconst panels = document.getElementById('panels');\n\nconst gameInfoCanvas = document.getElementById('game-info');\nconst errorMsgCanvas = document.getElementById('error-message');\n\nconst chooseStage = document.getElementById('choose-stage');\nconst chooseStageButtons = document.getElementsByClassName(\n  'choose-stage-button'\n);\n// 点击按钮选择不同的 stage\nArray.prototype.forEach.call(chooseStageButtons, (b) => {\n  b.addEventListener('click', chooseStageHandler, false);\n});\n\nconst status = document.getElementById('status');\n\nfunction chooseStageHandler(e) {\n  stage = e.target.dataset.stage;\n  chooseStage.style.display = 'none';\n  beginGame(stage);\n}\n\nfunction windowResizeHandler() {\n  // 确定canvas的位置\n  const cvx = (window.innerWidth - WIDTH - GAME_CONTROL_WIDTH) * 0.5;\n  const cvy = (window.innerHeight - HEIGHT) * 0.5;\n\n  canvas.style.position = 'absolute';\n  canvas.style.left = cvx + 'px';\n  canvas.style.top = cvy + 'px';\n\n  backgroundCanvas.style.position = 'absolute';\n  backgroundCanvas.style.left = cvx + BORDER_WIDTH + 'px';\n  backgroundCanvas.style.top = cvy + BORDER_WIDTH + 'px';\n\n  status.style.position = 'absolute';\n  status.style.left = cvx + BORDER_WIDTH + 'px';\n  status.style.top = cvy + BORDER_WIDTH + 'px';\n\n  gameControlCanvas.style.position = 'absolute';\n  gameControlCanvas.style.left = cvx + WIDTH + BORDER_WIDTH + 'px';\n  gameControlCanvas.style.top = cvy + 'px';\n\n  panels.style.position = 'absolute';\n  panels.style.left = cvx + BORDER_WIDTH + 'px';\n  panels.style.top = cvy + 200 + 'px';\n\n  gameInfoCanvas.style.position = 'absolute';\n  gameInfoCanvas.style.left = cvx + BORDER_WIDTH + 'px';\n  gameInfoCanvas.style.top = cvy + BORDER_WIDTH + 'px';\n\n  errorMsgCanvas.style.position = 'absolute';\n  errorMsgCanvas.style.left = cvx + BORDER_WIDTH + 'px';\n  errorMsgCanvas.style.top = cvy + BORDER_WIDTH + 'px';\n\n  chooseStage.style.position = 'absolute';\n  chooseStage.style.left = cvx + BORDER_WIDTH + 'px';\n  chooseStage.style.top = cvy + BORDER_WIDTH + 'px';\n}\n\nwindow.addEventListener('resize', windowResizeHandler, false);\n\nfunction renderBackground() {\n  const gradient = bgCtx.createRadialGradient(\n    (WIDTH + GAME_CONTROL_WIDTH) * 0.5,\n    HEIGHT * 0.5,\n    0,\n    (WIDTH + GAME_CONTROL_WIDTH) * 0.5,\n    HEIGHT * 0.5,\n    500\n  );\n\n  gradient.addColorStop(0, 'rgba(0, 70, 70, 1)');\n  gradient.addColorStop(1, 'rgba(0, 8, 14, 1');\n\n  bgCtx.fillStyle = gradient;\n  ctx.fillStyle = gradient;\n\n  bgCtx.fillRect(0, 0, WIDTH + GAME_CONTROL_WIDTH, HEIGHT);\n}\n\nwindowResizeHandler();\nrenderBackground();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {ReadonlyMat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to translate\r\n * @param {ReadonlyVec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Calculates a 3x3 matrix from the given quaternion\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\r\n *\r\n * @returns {mat3} out\r\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {ReadonlyMat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {ReadonlyMat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {ReadonlyMat3} a the first operand\r\n * @param {ReadonlyMat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat3} a The first matrix.\r\n * @param {ReadonlyMat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/mat3.js\n// module id = 9\n// module chunks = 0","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/mat4.js\n// module id = 10\n// module chunks = 0","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyVec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Gets the angular distance between two unit quaternions\r\n *\r\n * @param  {ReadonlyQuat} a     Origin unit quaternion\r\n * @param  {ReadonlyQuat} b     Destination unit quaternion\r\n * @return {Number}     Angle, in radians, between the two quaternions\r\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {ReadonlyQuat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Calculate the exponential of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\r\n * Calculate the natural logarithm of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @returns {quat} out\r\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\r\n * Calculate the scalar power of a unit quaternion.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate the exponential of\r\n * @param {Number} b amount to scale the quaternion by\r\n * @returns {quat} out\r\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random unit quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyMat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {ReadonlyQuat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {ReadonlyQuat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {ReadonlyQuat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat} a The first quaternion.\r\n * @param {ReadonlyQuat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyQuat} a The first vector.\r\n * @param {ReadonlyQuat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {ReadonlyVec3} a the initial vector\r\n * @param {ReadonlyVec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {ReadonlyQuat} a the first operand\r\n * @param {ReadonlyQuat} b the second operand\r\n * @param {ReadonlyQuat} c the third operand\r\n * @param {ReadonlyQuat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\r\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\r\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/quat.js\n// module id = 11\n// module chunks = 0","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/vec3.js\n// module id = 12\n// module chunks = 0","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/vec4.js\n// module id = 13\n// module chunks = 0","/**\n * 用于保存游戏中的各种 entity 的容器对象\n * 例如 enemy, tower, bullet\n * 提供增、删功能\n */\n\nclass EntityCollection extends Array {\n  constructor() {\n    super();\n  }\n\n  getElementById(id: number) {\n    for (let i = 0; i < this.length; i++) {\n      if (this[i].id === id) {\n        return this[i];\n      }\n    }\n    return null;\n  }\n\n  removeElementById(id: number) {\n    let removed;\n    for (let i = 0; i < this.length; i++) {\n      if (this[i].id === id) {\n        removed = this.splice(i, 1);\n        break;\n      }\n    }\n    return removed;\n  }\n\n  removeElementByIndex(idx: number) {\n    const removed = this.splice(idx, 1);\n    return removed;\n  }\n}\n\nexport default EntityCollection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/EntityCollection.ts","import { vec2 } from 'gl-matrix';\nimport TowerFactory, { BaseTower } from './entities/towers';\nimport Enemy from './entities/Enemy';\nimport Map from './entities/Map';\nimport Wave from './Wave';\nimport Message from './entities/Message';\nimport { calculateDistance, index2Px, px2Index } from './utils';\nimport {\n  gridNumX,\n  gridNumY,\n  WIDTH,\n  HEIGHT,\n  GAME_CONTROL_WIDTH,\n  towerData,\n  FRAMERATE,\n  OFFSET_X,\n  OFFSET_Y,\n  GRID_SIZE,\n  BULLETS,\n} from '@/constants';\nimport globalId from './id';\nimport GameControl from './entities/GameControl';\nimport GameInfo from './entities/GameInfo';\nimport GameError from './entities/GameError';\nimport { orbit, cfgPlayAudio } from './utils/config';\nimport { world } from './index';\nimport EntityCollection from './EntityCollection';\nimport { beepAudio } from './audio';\nimport Bullet from './entities/bullets/Bullet';\n\nconst canvas = document.getElementById('drawing') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d');\n\nconst backgroundCanvas = document.getElementById(\n  'background'\n) as HTMLCanvasElement;\nconst bgCtx = backgroundCanvas.getContext('2d');\nbackgroundCanvas.width = WIDTH + GAME_CONTROL_WIDTH;\nbackgroundCanvas.height = HEIGHT;\n\nconst gameControlCanvas = document.getElementById('game-control');\nconst panels = document.getElementById('panels');\nconst startButton = document.getElementById('start-button');\nconst backButton = document.getElementById('back-button');\nconst $chooseStage = document.getElementById('choose-stage');\n\nconst gameInfoCanvas = document.getElementById('game-info');\nconst status = document.getElementById('status');\n\ninterface Option {\n  element: any;\n  ctx: CanvasRenderingContext2D;\n  stage: number;\n  gameControl: GameControl;\n  gameInfo: GameInfo;\n  gameError: GameError;\n  genId: number;\n  bullets: EntityCollection;\n  towers: EntityCollection;\n  enemies: EntityCollection;\n  money: number;\n  col: number;\n  row: number;\n  enemyCreatedCount: number;\n  lastCreatedEnemyTime: Date;\n  orbit: any;\n  map: Map;\n  animId: number;\n}\n\ninterface Game extends Option {\n  mode: string;\n  addTowerType: string;\n  status: string;\n  score: number;\n  life: number;\n\n  // 当前是否选中塔\n  towerSelect: boolean;\n  towerSelectIndex: number;\n  towerSelectId: number;\n\n  /* 当前第几波 */\n  wave: number;\n  waves: any;\n\n  // FPS 相关数据\n  frames: number;\n  timeLastSecond: number;\n  fps: number;\n  fpsRate: number;\n  time: number;\n\n  destroy: boolean;\n\n  cursorX: number;\n  cursorY: number;\n}\n\nclass Game implements Option {\n  constructor(opt: Option) {\n    // Init\n    canvas.width = WIDTH;\n    canvas.height = HEIGHT;\n    this.element = opt.element;\n    this.ctx = ctx;\n    this.stage = opt.stage;\n\n    this.init();\n    this.bindEvent();\n  }\n\n  init() {\n    this.initData();\n\n    startButton.addEventListener(\n      'click',\n      this.startButtonClickHandler.bind(this),\n      false\n    );\n    backButton.addEventListener(\n      'click',\n      this.backButtonClickHandler.bind(this),\n      false\n    );\n\n    this.renderBackground();\n\n    panels.style.display = 'block';\n\n    const gameControlEle = document.getElementById('game-control');\n    const gameControl = new GameControl({\n      element: gameControlEle,\n      game: this,\n    });\n    this.gameControl = gameControl;\n    gameControl.draw();\n\n    const $gameInfo = document.getElementById('game-info');\n    const gameInfo = new GameInfo({\n      element: $gameInfo,\n      game: this,\n    });\n    this.gameInfo = gameInfo;\n    gameInfo.draw();\n\n    const $gameError = document.getElementById('error-message');\n    const gameError = new GameError({\n      element: $gameError,\n      game: this,\n    });\n    this.gameError = gameError;\n    gameError.draw();\n  }\n\n  initData() {\n    this.genId = 0;\n    globalId.clear();\n\n    this.bullets = new EntityCollection();\n    this.towers = new EntityCollection();\n    this.enemies = new EntityCollection();\n\n    this.money = 5000;\n    this.col = 0;\n    this.row = 0;\n    this.enemyCreatedCount = 0; // 目前已经创建的enemy的总数\n    this.lastCreatedEnemyTime = new Date();\n\n    // @ts-ignore\n    this.orbit = orbit[this.stage];\n\n    const newTowerCoord: [number, number] = [5, 3];\n    this.map = new Map({\n      ctx,\n      WIDTH,\n      HEIGHT,\n      newTowerCoord,\n      orbit: this.orbit,\n      game: this,\n    });\n\n    // 放置一个初始状态下的塔\n    const tower = new TowerFactory['BASE']({\n      id: globalId.genId(),\n      ctx,\n      x: GRID_SIZE / 2 + newTowerCoord[0] * GRID_SIZE + OFFSET_X,\n      y: GRID_SIZE / 2 + newTowerCoord[1] * GRID_SIZE + OFFSET_Y,\n      bullets: this.bullets,\n    });\n    this.towers.push(tower);\n\n    this.mode = '';\n    this.addTowerType = 'BASE';\n    this.status = '';\n    this.score = 0;\n    this.life = 1000;\n\n    // 当前是否选中塔\n    this.towerSelect = false;\n    this.towerSelectIndex = -1;\n    this.towerSelectId = -1;\n\n    this.wave = -1; // 当前第几波\n    this.waves = [];\n\n    // FPS 相关数据\n    this.frames = 0;\n    this.timeLastSecond = new Date().getTime();\n    this.fps = 0;\n    this.fpsRate = 0;\n    this.time = 0;\n\n    this.destroy = false;\n  }\n\n  renderBackground() {\n    const gradient = bgCtx.createRadialGradient(\n      (WIDTH + GAME_CONTROL_WIDTH) * 0.5,\n      HEIGHT * 0.5,\n      0,\n      (WIDTH + GAME_CONTROL_WIDTH) * 0.5,\n      HEIGHT * 0.5,\n      500\n    );\n\n    gradient.addColorStop(0, 'rgba(0, 70, 70, 1)');\n    gradient.addColorStop(1, 'rgba(0, 8, 14, 1');\n\n    bgCtx.fillStyle = gradient;\n    ctx.fillStyle = gradient;\n\n    bgCtx.fillRect(0, 0, WIDTH + GAME_CONTROL_WIDTH, HEIGHT);\n  }\n\n  startButtonClickHandler(e: any) {\n    e.stopPropagation();\n\n    if (this.status === '' || this.status === 'gameOver') {\n      panels.style.display = 'none';\n      status.style.display = 'block';\n      this.initData();\n      this.status = 'running';\n      this.draw();\n      this.gameControl.draw();\n    }\n\n    // 游戏开始时间\n    this.time = new Date().getTime();\n  }\n\n  backButtonClickHandler(e: any) {\n    e.stopPropagation();\n\n    this.gameControl.stopAnim();\n    $chooseStage.style.display = 'block';\n    const panels = document.getElementById('panels');\n    panels.style.display = 'none';\n    this.ctx.clearRect(0, 0, this.element.width, this.element.height);\n    const gameControl = this.gameControl;\n    gameControl.ctx.clearRect(\n      0,\n      0,\n      gameControl.element.width,\n      gameControl.element.height\n    );\n\n    this.destroy = true;\n    cancelAnimationFrame(this.animId);\n    this.status = '';\n  }\n\n  draw() {\n    // 游戏尚未开始的状态\n    if (this.status === '') {\n      return;\n    }\n\n    // FIXME: 选择不同的 stage 之后，之前的游戏画面会出现干扰\n    // @ts-ignore\n    if (this.stage !== world.stage || this.destroy) {\n      return;\n    }\n\n    // 游戏结束\n    if (this.status === 'gameOver') {\n      cancelAnimationFrame(this.animId); // NOT work !?\n      return;\n    }\n\n    // 游戏暂停状态\n    if (this.status === 'pause') {\n      return;\n    }\n\n    this.calculateFPS();\n\n    this.map.draw({\n      towers: this.towers,\n      towerSelect: this.towerSelect,\n      towerSelectIndex: this.towerSelectIndex,\n    });\n\n    // TODO: 完成设定波数后，游戏也会结束\n    if (this.life <= 0) {\n      this.gameOver();\n    }\n\n    if (this.shouldGenerateWave()) {\n      this.generateWave();\n    }\n\n    // 生成enemy\n    // 总数小于50，且间隔 x ms以上\n    if (this.shouldGenerateEnemy()) {\n      const cfg = this.waves[this.wave].generateEnemy();\n      const basePos = this.orbit[0];\n      const enemy = new Enemy({\n        id: globalId.genId(),\n        ctx: ctx,\n        x:\n          GRID_SIZE / 2 +\n          (Math.random() - 0.5) * 10 +\n          basePos[0] * GRID_SIZE +\n          OFFSET_X,\n        y:\n          GRID_SIZE / 2 +\n          (Math.random() - 0.5) * 10 +\n          basePos[1] * GRID_SIZE +\n          OFFSET_Y,\n        color: cfg.color,\n        radius: cfg.radius,\n        speed: cfg.speed,\n        health: cfg.health * (1 + this.wave / 5),\n        path: this.map.orbit,\n      });\n\n      this.enemies.push(enemy);\n      this.enemyCreatedCount++;\n      this.lastCreatedEnemyTime = new Date();\n    }\n\n    // 对每一个enemy进行step操作，并绘制\n    this.enemies.forEach((enemy) => {\n      enemy.step({ path: this.map.orbit });\n      enemy.draw();\n\n      if (enemy.dead) {\n        if (enemy.reachDest) {\n          this.life -= enemy.damage;\n        }\n        this.enemies.removeElementById(enemy.id);\n        cfgPlayAudio && beepAudio.play();\n      }\n    });\n\n    // Draw our tower\n    this.towers.forEach((tower, index) => {\n      if (this.towerSelect && this.towerSelectIndex === index) {\n        // 选中的塔需画出其范围\n        tower.selected = true;\n      } else {\n        tower.selected = false;\n      }\n      tower.draw(ctx);\n    });\n\n    // 确定 tower 的目标\n    this.towers.forEach((tower) => {\n      tower.findTarget(this.enemies);\n      if (tower.target !== null) {\n        const target = tower.target;\n        // 调整其朝向\n        tower.directionVec = vec2.fromValues(\n          target.x - tower.x,\n          target.y - tower.y\n        );\n\n        tower.direction =\n          Math.atan2(target.y - tower.y, target.x - tower.x) * (180 / Math.PI);\n      }\n    });\n\n    // 检查bullet是否与enemy相撞\n    this.detectImpact();\n\n    // 移除出界的bullet，画出剩下的bullet\n    for (let i = 0; i < this.bullets.length; i++) {\n      const bullet = this.bullets[i];\n\n      switch (bullet.type) {\n        case 'line':\n        case 'circle': {\n          if (bulletOutOfBound(bullet)) {\n            this.bullets.removeElementByIndex(i--);\n          } else {\n            bullet.draw(ctx, this.enemies);\n          }\n          break;\n        }\n        case 'laser': {\n          // 如果 bullet 的目标和其 parent 的目标不一致时，则删除这个 bullet\n          if (\n            !bullet.parent.target ||\n            bullet.parent.target.id !== bullet.target.id\n          ) {\n            this.bullets.removeElementByIndex(i--);\n            bullet.parent.shooting = false;\n          } else {\n            bullet.draw(ctx, this.enemies);\n          }\n          break;\n        }\n        case 'slow':\n        case 'fire': {\n          if (bullet.life <= 0) {\n            this.bullets.removeElementByIndex(i--);\n            bullet.parent.shooting = false;\n          } else {\n            bullet.parent.shooting = true;\n            bullet.draw(ctx);\n          }\n          break;\n        }\n        default:\n          bullet.draw(ctx);\n      }\n    }\n\n    if (this.mode === 'ADD_TOWER') {\n      // 添加塔模式\n      if (\n        0 <= this.col &&\n        this.col < gridNumX &&\n        0 <= this.row &&\n        this.row < gridNumY\n      ) {\n        if (this.map.coord[this.col][this.row] !== 'T') {\n          // 该位置没有塔\n          this.drawGhostTower(\n            ctx,\n            index2Px(this.col, this.row).x,\n            index2Px(this.col, this.row).y,\n            this.addTowerType\n          );\n        }\n      }\n    }\n\n    this.animId = requestAnimationFrame(() => this.draw());\n  }\n\n  // 循环检测 bullet 是否和 enemy 碰撞\n  detectImpact() {\n    for (var i = 0; i < this.bullets.length; i++) {\n      let impact = false;\n      let distance = 0;\n      const bullet = this.bullets[i];\n\n      for (var j = 0; j < this.enemies.length; j++) {\n        const enemy = this.enemies[j];\n\n        // 计算 bullet 和 enemy 距离\n        distance = distBulletToEnemy(bullet, enemy);\n\n        // enemy进入bullet的作用范围后，依据其种类产生效果\n        switch (bullet.type) {\n          case 'circle':\n          case 'laser':\n            if (distance <= enemy.radius + 2) {\n              impact = true;\n              enemy.health -= bullet.damage;\n              if (enemy.health <= 0) {\n                this.money += enemy.value;\n                this.enemies.removeElementByIndex(j--);\n                cfgPlayAudio && beepAudio.play();\n\n                this.score += 100;\n              }\n              break;\n            }\n            break;\n\n          case 'slow':\n            if (distance <= bullet.range) {\n              if (enemy.buff.every((b: any) => b.source !== bullet.id)) {\n                enemy.buff.push({\n                  type: 'deceleration',\n                  value: 0.35,\n                  source: bullet.id,\n                  duration: 10,\n                });\n              }\n            }\n            break;\n\n          case 'fire':\n            if (distance <= bullet.range) {\n              enemy.health -= bullet.damage;\n              if (enemy.health <= 0) {\n                this.money += enemy.value;\n                this.enemies.removeElementByIndex(j--);\n                this.score += 100;\n              }\n            }\n            break;\n        }\n      }\n\n      if (['laser', 'slow', 'fire'].includes(bullet.type)) {\n        impact = false;\n      }\n      if (impact) {\n        this.bullets.removeElementByIndex(i--);\n      }\n    }\n  }\n\n  /**\n   * 创建一个新的tower\n   * @param {Number} col x轴的坐标\n   * @param {Number} row y轴的坐标\n   */\n  createNewTower(col: number, row: number, towerType: string) {\n    // 检查当前位置是否已有物体\n    if (this.map.coord[col][row] === 'T') {\n      console.log('You can not place tower here!');\n      return -1;\n    }\n    const cost = towerData[towerType].cost;\n    // 检查是否有足够金钱\n    if (this.money - cost < 0) {\n      this.showError('You do not have enough money.');\n      return -1;\n    }\n\n    const { x, y } = index2Px(col, row);\n    const id = globalId.genId();\n\n    const config = { id, ctx, x, y, bullets: this.bullets };\n\n    // @ts-ignore\n    let tower = new TowerFactory[towerType](config);\n\n    if (!this.map.checkPath(col, row)) {\n      const info = '存在不能到达的区域，不能放置在这里';\n      this.showError(info);\n      return;\n    }\n\n    if (tower.type === 'BLOCK') {\n      this.map.coord[col][row] = 'B';\n    } else {\n      this.map.coord[col][row] = 'T';\n    }\n    this.map.findPath();\n    // 重新计算当前 enemy 的路径\n    this.enemies.forEach((enemy) => {\n      const { col, row } = px2Index(enemy.x, enemy.y);\n      enemy.path = this.map.findPointPath([col, row]);\n      enemy.wp = 1;\n\n      // 当前位置到目标点的距离\n      enemy.dx = 0;\n      enemy.dy = 0;\n      enemy.dist = 0;\n\n      // 标记是否需要转弯\n      enemy.angleFlag = 1;\n    });\n\n    this.money -= cost;\n    this.towers.push(tower);\n  }\n\n  sellTower(index = this.towerSelectIndex) {\n    const tower = this.towers[index];\n    const { col, row, type: towerType = 'BASE' } = tower;\n\n    // 删除 laser tower 时将其对应的 laser 一起删除\n    if (towerType === 'LASER') {\n      for (let i = 0; i < this.bullets.length; i++) {\n        const bullet = this.bullets[i];\n        if (bullet.type === 'laser' && bullet.parent.id === tower.id) {\n          this.bullets.removeElementByIndex(i--);\n        }\n      }\n    }\n\n    this.towers.removeElementByIndex(index);\n    this.map.coord[col][row] = '';\n\n    // 出售价格改为购买价格的 50%\n    this.money += towerData[towerType].cost * 0.5;\n    this.towerSelect = false;\n    this.towerSelectIndex = -1;\n  }\n\n  upgradeTower(index = this.towerSelectIndex) {\n    const tower = this.towers[index];\n    if (tower.level < 4) {\n      // TODO: 对塔的升级应该按预设数值，或按比例\n      // TODO: 将塔的升级方法写入塔自身的 class 中去\n      tower.range *= 1.25;\n      tower.damage *= 1.5;\n      tower.level++;\n    } else {\n      this.showError('已升级至最大值');\n    }\n  }\n\n  // 准备放置塔时，在鼠标所在位置画一个虚拟的塔\n  drawGhostTower(\n    ctx: CanvasRenderingContext2D,\n    x: number,\n    y: number,\n    towerType: string\n  ) {\n    const config = { ctx, x, y, bullets: this.bullets, selected: true };\n    // @ts-ignore\n    const tower = new TowerFactory[towerType](config);\n    tower.draw(ctx);\n  }\n\n  bindEvent() {\n    const canvas = this.element;\n    const game = this;\n\n    // 在canvas上进行右键操作\n    canvas.oncontextmenu = function (e: any) {\n      game.mode = '';\n      e.preventDefault();\n    };\n\n    canvas.onclick = function (e: any) {\n      const rect = canvas.getBoundingClientRect();\n\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n\n      const { col, row } = px2Index(x, y);\n      // console.log(col, row);\n\n      /* 只在地图范围内进行操作 */\n      if (0 <= col && col < gridNumX && 0 <= row && row < gridNumY) {\n        if (game.map.coord[col][row] === 'T') {\n          // 点击的格子内为塔\n          game.towers.map((tower, index) => {\n            if (tower.col === col && tower.row === row) {\n              console.log(`You select ${index}th tower, its id is ${tower.id}`);\n              // 已经选中的塔再次点击则取消\n              if (game.towerSelectIndex === index) {\n                game.towerSelectIndex = -1;\n                game.towerSelectId = -1;\n                game.towerSelect = false;\n                // game.map.selectCoord = null;\n              } else {\n                game.towerSelectIndex = index;\n                game.towerSelectId = tower.id;\n                game.towerSelect = true;\n                // game.map.selectCoord = { col, row };\n              }\n            }\n          });\n        } else {\n          game.towerSelect = false;\n          game.towerSelectId = -1;\n          game.towerSelectIndex = -1;\n          // game.map.selectCoord = { col, row };\n        }\n\n        if (game.mode === 'ADD_TOWER') {\n          game.createNewTower(col, row, game.addTowerType);\n        }\n      }\n    };\n\n    canvas.onmousemove = function (e: any) {\n      if (game.mode === 'ADD_TOWER') {\n        game.cursorX = e.pageX;\n        game.cursorY = e.pageY;\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        const { col, row } = px2Index(x, y);\n        game.col = col;\n        game.row = row;\n      }\n    };\n  }\n\n  shouldGenerateEnemy() {\n    // @ts-ignore\n    return this.wave < 999 && new Date() - this.lastCreatedEnemyTime > 1000;\n  }\n\n  shouldGenerateWave() {\n    return this.waves.length === 0 || this.waves[this.wave].waveFinish();\n  }\n\n  generateWave() {\n    this.waves.push(new Wave());\n    this.wave++;\n  }\n\n  gameOver() {\n    const title = document.getElementById('title');\n    title.innerHTML = `得分：${this.score}`;\n    panels.style.display = 'block';\n    this.status = 'gameOver';\n    cancelAnimationFrame(this.animId);\n  }\n\n  calculateFPS() {\n    // 当前帧的时间\n    const frameTime = new Date().getTime();\n    this.frames++;\n\n    // 距离上次更新 FPS 已经过去了一秒\n    if (frameTime > this.timeLastSecond + 1000) {\n      this.fps = Math.min(\n        Math.round((this.frames * 1000) / (frameTime - this.timeLastSecond)),\n        FRAMERATE\n      );\n\n      this.timeLastSecond = frameTime;\n      this.frames = 0;\n    }\n\n    const fps = Math.round(this.fps);\n    const time =\n      Math.round(((new Date().getTime() - this.time) / 1000) * 100) / 100; // 显示时间保留两位小数\n    const fpsRate = Math.round(Math.min(this.fps / FRAMERATE, 1) * 100);\n\n    let statusText = `Time: <span>${time}</span>`;\n    statusText += `<p class=\"fps\">FPS: <span>${fps} (${fpsRate}%)</span></p>`;\n\n    status.innerHTML = statusText;\n  }\n\n  showError(info: string) {\n    const message = new Message({ text: info });\n    console.log(info);\n    // @ts-ignore\n    this.gameError.messages.push(message);\n  }\n}\n\nfunction bulletOutOfBound(bullet: Bullet) {\n  switch (bullet.type) {\n    case 'circle':\n      return (\n        bullet.x < 0 || bullet.y < 0 || bullet.x > WIDTH || bullet.y > HEIGHT\n      );\n\n    case 'line':\n      return (\n        bullet.start[0] < 0 ||\n        bullet.start[1] < 0 ||\n        bullet.start[0] > WIDTH ||\n        bullet.start[1] > HEIGHT\n      );\n\n    default:\n      return false;\n  }\n}\n\n// 计算不同种类的 bullet 和 enemy 的距离\nfunction distBulletToEnemy(bullet: Bullet, enemy: Enemy) {\n  let dist;\n\n  switch (bullet.type) {\n    case BULLETS.CIRCLE:\n    case BULLETS.SLOW:\n    case BULLETS.FIRE:\n      dist = calculateDistance(bullet.x, bullet.y, enemy.x, enemy.y);\n      break;\n    case BULLETS.LASER:\n      // @ts-ignore\n      if (bullet.target.id === enemy.id) {\n        dist = 0;\n      }\n      break;\n  }\n  return dist;\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Game.ts","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x2 Matrix\r\n * @module mat2\r\n */\n\n/**\r\n * Creates a new identity mat2\r\n *\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat2} a matrix to clone\r\n * @returns {mat2} a new 2x2 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Copy the values from one mat2 to another\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set a mat2 to the identity matrix\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @returns {mat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Create a new mat2 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out A new 2x2 matrix\r\n */\n\nexport function fromValues(m00, m01, m10, m11) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Set the components of a mat2 to the given values\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\r\n * @returns {mat2} out\r\n */\n\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\r\n * Transpose the values of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    var a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3]; // Calculate the determinant\n\n  var det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] = a0 * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {mat2} out\r\n */\n\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  var a0 = a[0];\n  out[0] = a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a0;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2\r\n *\r\n * @param {ReadonlyMat2} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n/**\r\n * Multiplies two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n/**\r\n * Rotates a mat2 by the given angle\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n/**\r\n * Scales the mat2 by the dimensions in the given vec2\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to rotate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat2} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2.identity(dest);\r\n *     mat2.scale(dest, dest, vec);\r\n *\r\n * @param {mat2} out mat2 receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat2} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2\r\n *\r\n * @param {ReadonlyMat2} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat2\r\n *\r\n * @param {ReadonlyMat2} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3]);\n}\n/**\r\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\r\n * @param {ReadonlyMat2} L the lower triangular matrix\r\n * @param {ReadonlyMat2} D the diagonal matrix\r\n * @param {ReadonlyMat2} U the upper triangular matrix\r\n * @param {ReadonlyMat2} a the input matrix to factorize\r\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2] / a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n/**\r\n * Adds two mat2's\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @returns {mat2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat2} a The first matrix.\r\n * @param {ReadonlyMat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat2} a The first matrix.\r\n * @param {ReadonlyMat2} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2} out the receiving matrix\r\n * @param {ReadonlyMat2} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2} out the receiving vector\r\n * @param {ReadonlyMat2} a the first operand\r\n * @param {ReadonlyMat2} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Alias for {@link mat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/mat2.js\n// module id = 17\n// module chunks = 0","import * as glMatrix from \"./common.js\";\n/**\r\n * 2x3 Matrix\r\n * @module mat2d\r\n * @description\r\n * A mat2d contains six elements defined as:\r\n * <pre>\r\n * [a, b,\r\n *  c, d,\r\n *  tx, ty]\r\n * </pre>\r\n * This is a short form for the 3x3 matrix:\r\n * <pre>\r\n * [a, b, 0,\r\n *  c, d, 0,\r\n *  tx, ty, 1]\r\n * </pre>\r\n * The last column is ignored so the array is shorter and operations are faster.\r\n */\n\n/**\r\n * Creates a new identity mat2d\r\n *\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(6);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[4] = 0;\n    out[5] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat2d initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat2d} a matrix to clone\r\n * @returns {mat2d} a new 2x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Copy the values from one mat2d to another\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\r\n * Set a mat2d to the identity matrix\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Create a new mat2d with the given values\r\n *\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} A new mat2d\r\n */\n\nexport function fromValues(a, b, c, d, tx, ty) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Set the components of a mat2d to the given values\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {Number} a Component A (index 0)\r\n * @param {Number} b Component B (index 1)\r\n * @param {Number} c Component C (index 2)\r\n * @param {Number} d Component D (index 3)\r\n * @param {Number} tx Component TX (index 4)\r\n * @param {Number} ty Component TY (index 5)\r\n * @returns {mat2d} out\r\n */\n\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\r\n * Inverts a mat2d\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {mat2d} out\r\n */\n\nexport function invert(out, a) {\n  var aa = a[0],\n      ab = a[1],\n      ac = a[2],\n      ad = a[3];\n  var atx = a[4],\n      aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n/**\r\n * Multiplies two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n/**\r\n * Rotates a mat2d by the given angle\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Scales the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to translate\r\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\r\n * Translates the mat2d by the dimensions in the given vec2\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to translate\r\n * @param {ReadonlyVec2} v the vec2 to translate the matrix by\r\n * @returns {mat2d} out\r\n **/\n\nexport function translate(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.rotate(dest, dest, rad);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat2d} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.scale(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {ReadonlyVec2} v Scaling vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat2d.identity(dest);\r\n *     mat2d.translate(dest, dest, vec);\r\n *\r\n * @param {mat2d} out mat2d receiving operation result\r\n * @param {ReadonlyVec2} v Translation vector\r\n * @returns {mat2d} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n/**\r\n * Returns a string representation of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat2d(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat2d\r\n *\r\n * @param {ReadonlyMat2d} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], 1);\n}\n/**\r\n * Adds two mat2d's\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @returns {mat2d} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat2d} out the receiving matrix\r\n * @param {ReadonlyMat2d} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n/**\r\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat2d} out the receiving vector\r\n * @param {ReadonlyMat2d} a the first operand\r\n * @param {ReadonlyMat2d} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat2d} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat2d} a The first matrix.\r\n * @param {ReadonlyMat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat2d} a The first matrix.\r\n * @param {ReadonlyMat2d} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\n}\n/**\r\n * Alias for {@link mat2d.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat2d.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/mat2d.js\n// module id = 18\n// module chunks = 0","import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n/**\r\n * Dual Quaternion<br>\r\n * Format: [real, dual]<br>\r\n * Quaternion format: XYZW<br>\r\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\r\n * @module quat2\r\n */\n\n/**\r\n * Creates a new identity dual quat\r\n *\r\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\r\n */\n\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n\n  dq[3] = 1;\n  return dq;\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {ReadonlyQuat2} a dual quaternion to clone\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n/**\r\n * Creates a new dual quat initialized with the given values\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n/**\r\n * Creates a new dual quat from the given values (quat and translation)\r\n *\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component (translation)\r\n * @param {Number} y2 Y component (translation)\r\n * @param {Number} z2 Z component (translation)\r\n * @returns {quat2} new dual quaternion\r\n * @function\r\n */\n\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n      ay = y2 * 0.5,\n      az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n/**\r\n * Creates a dual quat from a quaternion and a translation\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyQuat} q a normalized quaternion\r\n * @param {ReadonlyVec3} t tranlation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n      ay = t[1] * 0.5,\n      az = t[2] * 0.5,\n      bx = q[0],\n      by = q[1],\n      bz = q[2],\n      bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Creates a dual quat from a translation\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyVec3} t translation vector\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a dual quat from a quaternion\r\n *\r\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\r\n * @param {ReadonlyQuat} q the quaternion\r\n * @returns {quat2} dual quaternion receiving operation result\r\n * @function\r\n */\n\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Creates a new dual quat from a matrix (4x4)\r\n *\r\n * @param {quat2} out the dual quaternion\r\n * @param {ReadonlyMat4} a the matrix\r\n * @returns {quat2} dual quat receiving operation result\r\n * @function\r\n */\n\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n/**\r\n * Copy the values from one dual quat to another\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the source dual quaternion\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Set a dual quat to the identity dual quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @returns {quat2} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\r\n * Set the components of a dual quat to the given values\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {Number} x1 X component\r\n * @param {Number} y1 Y component\r\n * @param {Number} z1 Z component\r\n * @param {Number} w1 W component\r\n * @param {Number} x2 X component\r\n * @param {Number} y2 Y component\r\n * @param {Number} z2 Z component\r\n * @param {Number} w2 W component\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n/**\r\n * Gets the real part of a dual quat\r\n * @param  {quat} out real part\r\n * @param  {ReadonlyQuat2} a Dual Quaternion\r\n * @return {quat} real part\r\n */\n\nexport var getReal = quat.copy;\n/**\r\n * Gets the dual part of a dual quat\r\n * @param  {quat} out dual part\r\n * @param  {ReadonlyQuat2} a Dual Quaternion\r\n * @return {quat} dual part\r\n */\n\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n/**\r\n * Set the real component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat} q a quaternion representing the real part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport var setReal = quat.copy;\n/**\r\n * Set the dual component of a dual quat to the given quaternion\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat} q a quaternion representing the dual part\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n/**\r\n * Gets the translation of a normalized dual quat\r\n * @param  {vec3} out translation\r\n * @param  {ReadonlyQuat2} a Dual Quaternion to be decomposed\r\n * @return {vec3} translation\r\n */\n\nexport function getTranslation(out, a) {\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n/**\r\n * Translates a dual quat by the given vector\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {quat2} out\r\n */\n\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3],\n      bx1 = v[0] * 0.5,\n      by1 = v[1] * 0.5,\n      bz1 = v[2] * 0.5,\n      ax2 = a[4],\n      ay2 = a[5],\n      az2 = a[6],\n      aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the X axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Y axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around the Z axis\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {number} rad how far should the rotation be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (a * q)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {ReadonlyQuat} q quaternion to rotate by\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n/**\r\n * Rotates a dual quat by a given quaternion (q * a)\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat} q quaternion to rotate by\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @returns {quat2} out\r\n */\n\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      bx = a[0],\n      by = a[1],\n      bz = a[2],\n      bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n/**\r\n * Rotates a dual quat around a given axis. Does the normalisation automatically\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @param {Number} rad how far the rotation should be\r\n * @returns {quat2} out\r\n */\n\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n\n  var axisLength = Math.hypot(axis[0], axis[1], axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Adds two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n/**\r\n * Multiplies two dual quat's\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {quat2} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n      ay0 = a[1],\n      az0 = a[2],\n      aw0 = a[3],\n      bx1 = b[4],\n      by1 = b[5],\n      bz1 = b[6],\n      bw1 = b[7],\n      ax1 = a[4],\n      ay1 = a[5],\n      az1 = a[6],\n      aw1 = a[7],\n      bx0 = b[0],\n      by0 = b[1],\n      bz0 = b[2],\n      bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n/**\r\n * Alias for {@link quat2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a dual quat by a scalar number\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {ReadonlyQuat2} a the dual quat to scale\r\n * @param {Number} b amount to scale the dual quat by\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n/**\r\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\r\n *\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = quat.dot;\n/**\r\n * Performs a linear interpolation between two dual quats's\r\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\r\n *\r\n * @param {quat2} out the receiving dual quat\r\n * @param {ReadonlyQuat2} a the first operand\r\n * @param {ReadonlyQuat2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n/**\r\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a dual quat to calculate inverse of\r\n * @returns {quat2} out\r\n */\n\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a dual quat\r\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\r\n *\r\n * @param {quat2} out the receiving quaternion\r\n * @param {ReadonlyQuat2} a quat to calculate conjugate of\r\n * @returns {quat2} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\r\n * Calculates the length of a dual quat\r\n *\r\n * @param {ReadonlyQuat2} a dual quat to calculate length of\r\n * @returns {Number} length of a\r\n * @function\r\n */\n\nexport var length = quat.length;\n/**\r\n * Alias for {@link quat2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a dual quat\r\n *\r\n * @param {ReadonlyQuat2} a dual quat to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = quat.squaredLength;\n/**\r\n * Alias for {@link quat2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a dual quat\r\n *\r\n * @param {quat2} out the receiving dual quaternion\r\n * @param {ReadonlyQuat2} a dual quaternion to normalize\r\n * @returns {quat2} out\r\n * @function\r\n */\n\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n\n  return out;\n}\n/**\r\n * Returns a string representation of a dual quatenion\r\n *\r\n * @param {ReadonlyQuat2} a dual quaternion to represent as a string\r\n * @returns {String} string representation of the dual quat\r\n */\n\nexport function str(a) {\n  return \"quat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \")\";\n}\n/**\r\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyQuat2} a the first dual quaternion.\r\n * @param {ReadonlyQuat2} b the second dual quaternion.\r\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n/**\r\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyQuat2} a the first dual quat.\r\n * @param {ReadonlyQuat2} b the second dual quat.\r\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/quat2.js\n// module id = 19\n// module chunks = 0","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/esm/vec2.js\n// module id = 20\n// module chunks = 0","import { calculateDistance } from '@/utils';\nimport EntityCollection from '@/EntityCollection';\nimport Enemy from '../Enemy';\nimport { BULLETS, BULLET_TYPE } from '@/constants';\nimport { IBulletOption } from '@/interface';\n\nexport default class CircleBullet {\n  type: BULLET_TYPE;\n  x: number;\n  y: number;\n  ctx: CanvasRenderingContext2D;\n  target: Enemy;\n  radius: number;\n  speed: number;\n  vx: number;\n  vy: number;\n  angle: number;\n  hue: number;\n  range: number;\n  damage: number;\n\n  constructor({ ctx, x, y, target, range, damage }: IBulletOption) {\n    this.type = BULLETS.CIRCLE;\n    this.x = x;\n    this.y = y;\n    this.ctx = ctx;\n    this.target = target;\n    this.radius = 3;\n    this.speed = 5;\n    this.vx = 0;\n    this.vy = 0;\n    this.angle = 0;\n    this.hue = 200;\n    this.range = range;\n    this.damage = damage || 5;\n  }\n\n  step(enemies: EntityCollection) {\n    // 计算新位置\n\n    if (this.target) {\n      const target = enemies.getElementById(this.target.id);\n      if (target) {\n        const curDis = calculateDistance(target.x, target.y, this.x, this.y);\n        if (curDis < this.range) {\n          const dx = target.x - this.x;\n          const dy = target.y - this.y;\n          this.angle = Math.atan2(dy, dx);\n        }\n      }\n    }\n    this.vx = Math.cos(this.angle) * this.speed;\n    this.vy = Math.sin(this.angle) * this.speed;\n\n    this.x += this.vx;\n    this.y += this.vy;\n  }\n\n  draw(ctx: CanvasRenderingContext2D, enemies: EntityCollection) {\n    this.step(enemies);\n\n    // 绘图开始\n    ctx.save();\n    ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, 40%)';\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/bullets/CircleBullet.ts","import BaseTower from './BaseTower';\nimport Bullet from '../bullets/Bullet';\nimport { vec2 } from 'gl-matrix';\nimport { toRadians } from '@/utils';\nimport { config } from '@/utils/config';\nimport { gridWidth, towerData } from '@/constants';\nimport Enemy from '../Enemy';\n\nexport default class BulletTower extends BaseTower {\n  constructor(opt: any) {\n    // const { ctx, x, y, bullets, selected, damage } = opt;\n    super(opt);\n\n    this.type = 'BULLET';\n    this.hue = 100;\n    this.cost = towerData[this.type].cost;\n    this.range = 3 * gridWidth;\n\n    this.direction = opt.direction || 0; // 用度数表示的tower指向\n    this.bulletStartPosVec = vec2.fromValues(0, 0);\n    this.directionVec = vec2.create();\n  }\n\n  draw() {\n    const ctx = this.ctx;\n\n    // 将方向向量归一化\n    this.directionVec = vec2.fromValues(\n      Math.cos(toRadians(this.direction)),\n      Math.sin(toRadians(this.direction))\n    );\n    vec2.normalize(this.directionVec, this.directionVec);\n\n    // bullet 出射位置\n\n    vec2.scale(this.bulletStartPosVec, this.directionVec, 30);\n\n    ctx.save();\n    if (config.renderShadow) {\n      ctx.shadowBlur = this.radius;\n      ctx.shadowColor = 'hsl(' + this.hue + ',100%,60%)';\n    }\n\n    // 在选中的情况下，画出其射程范围\n    if (this.selected) {\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(200, 200, 200, 0.3)';\n      ctx.arc(this.x, this.y, this.range, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = 'hsl(' + this.hue + ',100%,80%';\n    ctx.fillStyle = 'hsl(' + this.hue + ',100%,80%';\n    ctx.lineWidth = Math.max(3, this.radius / 8);\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n\n    ctx.beginPath();\n    ctx.moveTo(this.x, this.y);\n    ctx.lineTo(\n      this.x + this.bulletStartPosVec[0],\n      this.y + this.bulletStartPosVec[1]\n    );\n    ctx.stroke();\n    ctx.closePath();\n\n    if (\n      this.targetIndex !== -1 &&\n      new Date().getTime() - this.lastShootTime.getTime() >= 500\n    ) {\n      this.shoot();\n      this.lastShootTime = new Date();\n    }\n\n    ctx.restore();\n  }\n\n  // 发射子弹\n  shoot() {\n    this.bullets.push(\n      // @ts-ignore\n      new Bullet({\n        ctx: this.ctx,\n        x: this.x + this.bulletStartPosVec[0],\n        y: this.y + this.bulletStartPosVec[1],\n        directionVec: this.directionVec,\n      })\n    );\n  }\n\n  findTarget(enemies: Enemy[]) {\n    super.findTarget(enemies);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/towers/BulletTower.ts","import { BULLETS, BULLET_TYPE } from '@/constants';\nimport { vec2 } from 'gl-matrix';\n\nexport default class Bullet {\n  type: BULLET_TYPE;\n  x: number;\n  y: number;\n  directionVec: vec2;\n  start: vec2;\n  hue: number;\n  velocity: vec2;\n  length: number;\n  bulletVec: vec2;\n  end: vec2;\n  damage: number;\n\n  constructor({ ctx, x, y, directionVec, damage }: {\n    ctx: CanvasRenderingContext2D,\n    x: number;\n    y: number;\n    directionVec: vec2;\n    damage: number;\n  }) {\n    this.type = BULLETS.LINE;\n    this.x = x;\n    this.y = y;\n    this.directionVec = directionVec;\n\n    // {vec2} this.start 表示起点位置的向量\n    this.start = vec2.fromValues(x, y);\n\n    this.hue = 200;\n\n    // {vec2} this.velocity 表示bullet速度的向量\n    // 将表示方向的单位向量乘以速率，得到速度向量\n    this.velocity = vec2.create();\n    vec2.scale(this.velocity, directionVec, 2);\n\n    // bullet的长度\n    this.length = 10;\n    // 从bullet的起点指向终点的向量\n    this.bulletVec = vec2.create();\n    vec2.scale(this.bulletVec, directionVec, this.length);\n\n    // {vec2} this.end 表示终点位置的向量\n    this.end = vec2.create();\n    this.end = vec2.add(this.end, this.start, this.bulletVec);\n\n    this.damage = damage || 5;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    // bullet运动后的起点和终点位置\n    vec2.add(this.start, this.start, this.velocity);\n    vec2.add(this.end, this.end, this.velocity);\n\n    // 绘图开始\n    ctx.save();\n    ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, 80%)';\n    ctx.beginPath();\n    ctx.moveTo(this.start[0], this.start[1]);\n    ctx.lineTo(this.end[0], this.end[1]);\n    ctx.stroke();\n    ctx.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/bullets/Bullet.ts","import BaseTower from './BaseTower';\nimport Laser from '../bullets/Laser';\nimport { vec2 } from 'gl-matrix';\nimport { config } from '../../utils/config';\nimport { gridWidth, towerData } from '@/constants';\nimport globalId from '../../id';\n\nexport default class LaserTower extends BaseTower {\n  shooting: boolean;\n  laserId: number;\n  // @ts-ignore\n  bullets: Laser[];\n\n  constructor(opt: any) {\n    // const { ctx, x, y, bullets, selected, damage } = opt;\n    super(opt);\n\n    this.type = 'LASER';\n    this.hue = 60;\n    this.cost = towerData[this.type].cost;\n    this.range = 4 * gridWidth;\n    this.radius = opt.radius || 10;\n    this.barrelLength = 2.5;\n\n    this.direction = opt.direction || 0; // 用度数表示的tower指向\n    this.bulletStartPosVec = vec2.fromValues(0, 0);\n    this.directionVec = vec2.create();\n\n    this.shooting = false;\n    this.damage = 0.1;\n    this.laserId = -1;\n  }\n\n  shoot() {\n    if (this.target) {\n      const laserId = globalId.genId();\n      this.laserId = laserId;\n\n      const idx = this.bullets.findIndex((b) => {\n        return b.parent === this;\n      });\n\n      // 如果 bullets 数组中已存在以本 tower 为 parent 的元素，则返回\n      if (idx > 0) {\n        return;\n      }\n\n      this.bullets.push(\n        new Laser({\n          id: laserId,\n          target: this.target,\n          ctx: this.ctx,\n          x: this.x + this.bulletStartPosVec[0],\n          y: this.y + this.bulletStartPosVec[1],\n          damage: this.damage,\n          // @ts-ignore\n          parent: this,\n        })\n      );\n\n      this.shooting = true;\n    }\n  }\n\n  draw() {\n    this.step();\n    const ctx = this.ctx;\n\n    ctx.save();\n\n    if (config.renderShadow) {\n      ctx.shadowBlur = this.radius;\n      ctx.shadowColor = 'hsl(' + this.hue + ',100%,60%)';\n    }\n\n    // 在选中的情况下，画出其射程范围\n    if (this.selected) {\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(200, 200, 200, 0.3)';\n      ctx.arc(this.x, this.y, this.range, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = 'hsl(' + this.hue + ',100%, 80%';\n    ctx.fillStyle = 'hsl(' + this.hue + ',100%, 80%';\n    ctx.lineWidth = Math.max(3, this.radius / 8);\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n\n    ctx.beginPath();\n    ctx.moveTo(this.x, this.y);\n    ctx.lineTo(\n      this.x + this.bulletStartPosVec[0],\n      this.y + this.bulletStartPosVec[1]\n    );\n    ctx.lineWidth = 5;\n    ctx.stroke();\n    ctx.closePath();\n\n    if (this.targetIndex !== -1 && this.shooting === false) {\n      this.shoot();\n    }\n\n    ctx.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/towers/LaserTower.ts","import { BULLETS, BULLET_TYPE } from '@/constants';\nimport { IBulletOption } from '@/interface';\nimport Enemy from '../Enemy';\nimport { LaserTower } from '../towers';\n\nexport default class Laser {\n  type: BULLET_TYPE;\n  id: number;\n  x: number;\n  y: number;\n  ctx: CanvasRenderingContext2D;\n  parent: LaserTower;\n  target: Enemy;\n  damage: number;\n  width: number;\n  vx: number;\n  vy: number;\n  angle: number;\n  hue: number;\n\n  constructor({\n    ctx,\n    x,\n    y,\n    parent,\n    target,\n    damage,\n    id,\n  }: Omit<\n    IBulletOption & {\n      parent: LaserTower;\n    },\n    'range'\n  >) {\n    this.type = BULLETS.LASER;\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.ctx = ctx;\n    this.target = target;\n    this.width = 5;\n    // this.speed = 8;\n    this.vx = 0;\n    this.vy = 0;\n    this.angle = 0;\n    this.hue = parent.hue;\n    this.damage = damage || 5;\n    this.parent = parent;\n  }\n\n  step() {\n    const parent = this.parent;\n    this.x = parent.x + parent.bulletStartPosVec[0];\n    this.y = parent.y + parent.bulletStartPosVec[1];\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    this.step();\n\n    // 绘图开始\n    ctx.save();\n    ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, 80%)';\n    ctx.beginPath();\n    ctx.moveTo(this.x, this.y);\n    ctx.lineTo(this.target.x, this.target.y);\n    ctx.stroke();\n    ctx.closePath();\n    ctx.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/bullets/Laser.ts","/**\n * 减速塔\n */\n\nimport BaseTower from './BaseTower';\nimport SlowField from '../bullets/SlowField';\nimport { towerData, gridWidth } from '@/constants';\nimport globalId from '../../id';\n\nexport default class SlowTower extends BaseTower {\n  shooting: boolean;\n  ratio: number;\n  counter: number;\n\n  // @ts-ignore\n  constructor(opt) {\n    super(opt);\n    // const { ctx, x, y, selected, damage } = opt;\n\n    this.type = 'SLOW';\n    this.hue = 120;\n    this.cost = towerData[this.type].cost;\n\n    this.range = 2.5 * gridWidth;\n\n    this.shooting = false;\n    this.ratio = 0.3;\n\n    this.counter = 0;\n  }\n\n  shoot() {\n    // @ts-ignore\n    const slowField = new SlowField({\n      id: globalId.genId(),\n      ctx: this.ctx,\n      range: this.range,\n      ratio: this.ratio,\n      parent: this,\n    });\n    // @ts-ignore\n    this.bullets.push(slowField);\n  }\n\n  draw() {\n    const ctx = this.ctx;\n    ctx.save();\n    // 在选中的情况下，画出其射程范围\n    if (this.selected) {\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(200, 200, 200, 0.3)';\n      ctx.arc(this.x, this.y, this.range, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = 'hsl(' + this.hue + ',100%, 80%';\n    // ctx.fillStyle = 'hsl(' + this.hue + ',100%, 80%';\n    ctx.fillStyle = 'rgba(1, 158, 213, 0.15)';\n    ctx.lineWidth = Math.max(3, this.radius / 8);\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n\n    if (this.targetIndex !== -1 && !this.shooting) {\n      this.shoot();\n      this.shooting = true;\n    }\n\n    ctx.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/towers/SlowTower.ts","/**\n * 减速场 ====> 就是一个大圆圈\n */\n\nimport { BULLETS, BULLET_TYPE } from '@/constants';\nimport { IBulletOption } from '@/interface';\nimport { SlowTower } from '../towers';\n\nexport default class SlowField {\n  type: BULLET_TYPE;\n  ctx: CanvasRenderingContext2D;\n  id: number;\n  minRange: number;\n  maxRange: number;\n  range: number;\n  parent: SlowTower;\n  ratio: number;\n  life: number;\n  maxLife: number;\n  x: number;\n  y: number;\n\n  constructor(\n    opt: IBulletOption & {\n      ratio: number;\n      parent: SlowTower;\n    }\n  ) {\n    const { ctx, parent, range, ratio, id } = opt;\n    this.type = BULLETS.SLOW;\n    this.ctx = ctx;\n    this.id = id;\n\n    // range 将随时间逐渐加大\n    this.minRange = 20;\n    this.maxRange = range;\n    this.range = this.minRange;\n\n    this.parent = parent;\n    this.ratio = ratio; // 减速系数\n\n    this.maxLife = 300;\n    this.life = this.maxLife;\n\n    this.x = parent.x;\n    this.y = parent.y;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    if (this.life > 0) {\n      this.range = this.calcRange();\n      ctx.save();\n      ctx.fillStyle = 'rgba(1, 158, 213, 0.15)';\n      ctx.beginPath();\n      ctx.arc(this.x, this.y, this.range, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.restore();\n      this.life--;\n    }\n  }\n\n  /**\n   * range 会随时间由最小值逐步加大至最大值，然后保持在最大值\n   */\n  calcRange() {\n    const minR = this.minRange;\n    const maxR = this.maxRange;\n    const timePassed = this.maxLife - this.life;\n    const timeStop = 100; // 在该时间点range达到最大\n\n    const range =\n      minR + (Math.min(timeStop, timePassed) * (maxR - minR)) / timeStop;\n    return range;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/bullets/SlowField.ts","/**\n * 范围攻击\n */\nimport BaseTower from './BaseTower';\nimport FireZone from '../bullets/FireZone';\nimport { towerData, gridWidth } from '@/constants';\nimport globalId from '../../id';\n\nexport default class FireTower extends BaseTower {\n  shooting: boolean;\n  counter: number;\n\n  constructor(opt: any) {\n    super(opt);\n    // const { ctx, x, y, selected, damage } = opt;\n\n    this.type = 'FIRE';\n    this.hue = 0;\n    this.cost = towerData[this.type].cost;\n\n    this.range = 3 * gridWidth;\n\n    this.shooting = false;\n    this.damage = 0.05;\n\n    this.counter = 0;\n  }\n\n  shoot() {\n    const fireZone = new FireZone({\n      id: globalId.genId(),\n      ctx: this.ctx,\n      range: this.range,\n      damage: this.damage,\n      parent: this,\n    });\n    // @ts-ignore\n    this.bullets.push(fireZone);\n  }\n\n  draw() {\n    const ctx = this.ctx;\n    ctx.save();\n    // 在选中的情况下，画出其射程范围\n    if (this.selected) {\n      ctx.beginPath();\n      ctx.fillStyle = 'rgba(200, 200, 200, 0.3)';\n      ctx.arc(this.x, this.y, this.range, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = 'hsl(' + this.hue + ',100%, 80%';\n    ctx.fillStyle = 'hsl(' + this.hue + ',100%, 80%';\n    // ctx.fillStyle = 'rgba(1, 158, 213, 0.3)';\n    ctx.lineWidth = Math.max(3, this.radius / 8);\n\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n\n    if (this.targetIndex !== -1 && !this.shooting) {\n      this.shoot();\n      this.shooting = true;\n    }\n\n    ctx.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/towers/FireTower.ts","/**\n * 范围伤害 aoe\n */\n\nimport { BULLETS } from '@/constants';\nimport { IBulletOption } from '@/interface';\nimport { FireTower } from '../towers';\n\nexport default class FireZone {\n  type: string;\n  ctx: CanvasRenderingContext2D;\n  id: number;\n  minRange: number;\n  maxRange: number;\n  range: number;\n  parent: FireTower;\n  damage: number;\n  maxLife: number;\n  life: number;\n  x: number;\n  y: number;\n\n  constructor(\n    opt: Omit<\n      IBulletOption & {\n        parent: FireTower;\n      },\n      'x' | 'y' | 'target'\n    >\n  ) {\n    const { ctx, parent, range, damage, id } = opt;\n    this.type = BULLETS.FIRE;\n    this.ctx = ctx;\n    this.id = id;\n\n    // range 将随时间逐渐加大\n    this.minRange = 20;\n    this.maxRange = range;\n    this.range = this.minRange;\n\n    this.parent = parent;\n    this.damage = damage;\n\n    this.maxLife = 300;\n    this.life = this.maxLife;\n\n    this.x = parent.x;\n    this.y = parent.y;\n  }\n\n  draw(ctx: CanvasRenderingContext2D): void {\n    if (this.life > 0) {\n      this.range = this.calcRange();\n      ctx.save();\n      ctx.fillStyle = 'rgba(255, 0, 0, 0.15)';\n      ctx.beginPath();\n      ctx.arc(this.x, this.y, this.range, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.restore();\n      this.life--;\n    }\n  }\n\n  /**\n   * range 会随时间由最小值逐步加大至最大值，然后保持在最大值\n   */\n  calcRange() {\n    const minR = this.minRange;\n    const maxR = this.maxRange;\n    const timePassed = this.maxLife - this.life;\n    const timeStop = 100; // 在该时间点range达到最大\n\n    const range =\n      minR + (Math.min(timeStop, timePassed) * (maxR - minR)) / timeStop;\n    return range;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/bullets/FireZone.ts","/**\n * 障碍物\n */\nimport BaseTower from './BaseTower';\nimport { GRID_SIZE } from '@/constants';\n\nexport default class Block extends BaseTower {\n  constructor(opt: any) {\n    super(opt);\n    this.type = 'BLOCK';\n  }\n\n  draw() {\n    const ctx = this.ctx;\n\n    ctx.save();\n\n    ctx.strokeStyle = 'greenyellow';\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    const halfSize = GRID_SIZE / 2;\n    ctx.moveTo(this.x - halfSize, this.y - halfSize);\n    ctx.lineTo(this.x + halfSize, this.y + halfSize);\n    ctx.moveTo(this.x + halfSize, this.y - halfSize);\n    ctx.lineTo(this.x - halfSize, this.y + halfSize);\n\n    ctx.stroke();\n\n    ctx.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/towers/Block.ts","import { GRID_SIZE } from '@/constants';\nimport { index2Px } from '../utils';\n\ninterface Option {\n  id: number;\n  ctx: CanvasRenderingContext2D;\n  x: number;\n  y: number;\n  speed: number;\n  radius: number;\n  color: string | 0;\n  health: number;\n  value?: number;\n  damage?: number;\n\n  path: any[];\n\n\n\n}\n\ninterface Enemy extends Option {\n  /** 速度在两个方向上的分量 */\n  vx: number;\n  vy: number;\n  wp: number;\n  dx: number;\n  dy: number;\n  dist: number;\n  angleFlag: 0 | 1;\n  maxHealth: number;\n  buff: any;\n  angle: number;\n  dead: boolean;\n  reachDest: boolean;\n  // value, damage, buff, angle\n};\n\nclass Enemy implements Option {\n  constructor(opt: Option) {\n    this.id = opt.id;\n    this.ctx = opt.ctx;\n\n    // 用像素表示的当前位置\n    this.x = opt.x;\n    this.y = opt.y;\n\n    // 当前目标点waypoint的index\n    this.wp = 0;\n\n    // 速度在两个方向上的分量\n    this.vx = 0;\n    this.vy = 0;\n\n    this.speed = opt.speed || 2;\n\n    // 当前位置到目标点的距离\n    this.dx = 0;\n    this.dy = 0;\n    this.dist = 0;\n\n    // 需要绘制的半径大小\n    this.radius = opt.radius || 10;\n\n    // 标记是否需要转弯\n    this.angleFlag = 1;\n\n    this.color = opt.color || 0;\n    this.maxHealth = opt.health || 20;\n    this.health = this.maxHealth;\n\n    this.value = opt.value || 50;\n    this.damage = opt.damage || 5;\n\n    this.path = opt.path;\n\n    /**\n     * {\n     *   type: 'deceleration',\n     *   value: 0.1,\n     *   source: someId,\n     *   duration: 2000     // ms\n     * }\n     */\n    this.buff = [];\n  }\n\n  step() {\n    const path = this.path;\n    if (path.length === 0) {\n      return;\n    }\n\n    // 对 this.buff 中的数据进行依次处理\n    let speed = this.speed;\n    if (this.buff.length > 0) {\n      this.buff.forEach((b: any, idx: number) => {\n        if (b.type === 'deceleration') {\n          // 减速效果\n          if (b.duration-- > 0) {\n            speed *= 1 - b.value;\n          }\n        }\n        if (b.duration <= 0) {\n          this.buff.splice(idx, 1);\n        }\n      });\n    }\n\n    // 当即将达到终点时，path 长度为1，而 this.wp 为1，超出数组范围\n    const wp = path[Math.min(this.wp, path.length - 1)];\n\n    // @ts-ignore\n    const { x: wpX, y: wpY } = index2Px(...wp);\n    this.dx = wpX - this.x;\n    this.dy = wpY - this.y;\n    this.dist = Math.sqrt(this.dx * this.dx + this.dy * this.dy);\n\n    if (this.angleFlag) {\n      this.angle = Math.atan2(this.dy, this.dx);\n      this.angleFlag = 0;\n    }\n    this.vx = Math.cos(this.angle) * speed;\n    this.vy = Math.sin(this.angle) * speed;\n\n    if (Math.abs(this.dist) > speed) {\n      this.x += this.vx;\n      this.y += this.vy;\n    } else {\n      // @ts-ignore\n      const { x, y } = index2Px(...wp);\n      this.x = x;\n      this.y = y;\n      if (this.wp + 1 >= path.length) {\n        // 到达终点\n        this.dead = true;\n        this.reachDest = true;\n      } else {\n        this.wp++;\n        this.angleFlag = 1;\n      }\n    }\n  }\n\n  draw() {\n    const ctx = this.ctx;\n    ctx.strokeStyle = this.color || '#eee';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.stroke();\n\n    this.drawHealth();\n    // this.drawItsPath();\n  }\n\n  drawHealth() {\n    const ctx = this.ctx;\n    ctx.beginPath();\n    ctx.moveTo(this.x - this.radius, this.y);\n    ctx.lineTo(\n      this.x - this.radius + (this.health / this.maxHealth) * this.radius * 2,\n      this.y\n    );\n    ctx.stroke();\n  }\n\n  /**\n   * 画出它的前进路径\n   */\n  drawItsPath() {\n    const ctx = this.ctx;\n    const path = this.path;\n    ctx.strokeStyle = 'greenyellow';\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    for (let i = 0; i < path.length - 1; i++) {\n      ctx.moveTo(\n        (path[i][0] + 0.5) * GRID_SIZE,\n        (path[i][1] + 0.5) * GRID_SIZE\n      );\n      if (path[i + 1]) {\n        ctx.lineTo(\n          (path[i + 1][0] + 0.5) * GRID_SIZE,\n          (path[i + 1][1] + 0.5) * GRID_SIZE\n        );\n      }\n    }\n    ctx.stroke();\n  }\n}\n\nexport default Enemy;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Enemy.ts","/**\n * 地图上不同种类的 grid 的标记\n * DEFAULT: 默认状态，enemy 能够通过，能够放置 tower\n * BLOCK: 障碍物，enemy 不能通过，不能放置 tower\n * PLATFORM: 平台，enemy 不能通过，但能放置 tower\n * PATH: enemy 通行的道路，不能放置 tower\n */\n\nimport { GRID_SIZE, gridNumX, gridNumY, OFFSET_X, OFFSET_Y } from '@/constants';\nimport Path from './Path';\nimport { highlightGrid, drawGrid, index2Px, px2Index } from '../utils';\nimport { Graph, BreadthFirstSearch } from '../utils/BreadthFirstSearch';\nimport globalId from '../id';\nimport TowerFactory, { BaseTower } from './towers/index';\nimport { MAP_SETTING } from '../utils/config';\nimport Game from '@/Game';\n\ninterface Option {\n  ctx: CanvasRenderingContext2D;\n  newTowerCoord: [number, number];\n  orbit: any;\n  WIDTH: number;\n  HEIGHT: number;\n  path?: Path;\n  game: Game;\n}\n\ninterface Map extends Option {\n  graph: Graph;\n  coord: any[];\n};\n\nclass Map implements Option {\n  constructor(opt: Option) {\n    this.ctx = opt.ctx;\n    this.newTowerCoord = opt.newTowerCoord || null;\n    this.orbit = opt.orbit;\n    this.WIDTH = opt.WIDTH;\n    this.HEIGHT = opt.HEIGHT;\n\n    this.coord = [];\n\n    for (let i = 0; i < gridNumX; i++) {\n      this.coord[i] = [];\n    }\n\n    // 初始状态下的塔\n    if (this.newTowerCoord) {\n      const [col, row] = this.newTowerCoord;\n      this.coord[col][row] = 'T';\n    }\n    // Create an instance of Path object\n    this.path = new Path({\n      ctx: this.ctx,\n      radius: GRID_SIZE / 2,\n      orbit: this.orbit,\n    });\n\n    // 初始化坐标\n    const game = opt.game;\n    this.game = game;\n\n    // @ts-ignore\n    const mapSetting = MAP_SETTING[game.stage];\n    if (mapSetting) {\n      /* 默认情况下路径以给出的 orbit 为准，如果存在 mapSetting，则重新寻找路径 */\n      // @ts-ignore\n      const blockArray = MAP_SETTING[game.stage].BLOCK;\n      blockArray.forEach((block: any) => {\n        const [col, row] = block;\n        this.coord[col][row] = 'B';\n        const { x, y } = index2Px(col, row);\n        const id = globalId.genId();\n        const config = { id, ctx: this.ctx, x, y };\n        const tower = new TowerFactory['BLOCK'](config);\n        game.towers.push(tower);\n      });\n\n      this.findPath();\n    } else {\n      this.path.setPoints();\n      this.setMap();\n    }\n  }\n\n  // 设置地图数组\n  // 路径所在位置标识为 'P'\n  setMap() {\n    for (let i = 0; i < gridNumX; i++) {\n      for (let j = 0; j < gridNumY; j++) {\n        // 清除之前的路径标记，0 表示空白方块\n        if (this.coord[i][j] === 'P') {\n          this.coord[i][j] = 0;\n        }\n      }\n    }\n\n    const path = this.path.orbit;\n    for (let i = 0; i < path.length - 1; i++) {\n      const current = path[i];\n      const next = path[i + 1];\n      if (current[0] === next[0]) {\n        /* x 坐标相等，y 坐标进行变化 */\n        const x = current[0];\n\n        const minY = Math.max(Math.min(current[1], next[1]), 0);\n        const maxY = Math.min(Math.max(current[1], next[1]), gridNumY);\n\n        for (let y = minY; y <= maxY; y++) {\n          this.coord[x][y] = 'P';\n        }\n      } else if (current[1] === next[1]) {\n        /* y 坐标相等，x 坐标进行变化 */\n        const y = current[1];\n\n        const minX = Math.max(Math.min(current[0], next[0]), 0);\n        const maxX = Math.min(Math.max(current[0], next[0]), gridNumX);\n\n        for (let x = minX; x <= maxX; x++) {\n          this.coord[x][y] = 'P';\n        }\n      }\n    }\n  }\n\n  draw({ towers, towerSelect, towerSelectIndex }: {\n    towers: BaseTower[],\n    towerSelect: boolean,\n    towerSelectIndex: number,\n  }) {\n    const ctx = this.ctx;\n    const WIDTH = this.WIDTH;\n    const HEIGHT = this.HEIGHT;\n\n    ctx.save();\n\n    // Clear canvas\n    // ctx.fillStyle = '#fff';\n    ctx.fillRect(0, 0, WIDTH, HEIGHT);\n\n    ctx.strokeStyle = '#eee';\n    ctx.fillStyle = '#fff';\n    ctx.lineWidth = 1;\n\n    drawGrid(ctx, gridNumX, gridNumY, GRID_SIZE, '#eee', OFFSET_X, OFFSET_Y);\n\n    // 当前选中的格子突出显示\n    if (towerSelect) {\n      const { col, row } = towers[towerSelectIndex];\n      const { x, y } = index2Px(col, row);\n      highlightGrid(\n        ctx,\n        x - GRID_SIZE / 2,\n        y - GRID_SIZE / 2,\n        GRID_SIZE,\n        GRID_SIZE\n      );\n    }\n    // // 空白格子也突出显示\n    // else if (this.selectCoord) {\n    //     const { col, row } = this.selectCoord;\n    //     if (this.coord[col][row] !== 'P') {\n    //         highlightGrid(ctx, col * gridWidth, row * gridHeight, gridWidth, gridHeight);\n    //     }\n    // }\n\n    ctx.restore();\n\n    this.path.draw();\n  }\n\n  // 寻找路径\n  findPath() {\n    const graph = new Graph(gridNumX, gridNumY);\n    this.graph = graph;\n    for (let j = 0; j < gridNumY; j++) {\n      for (let i = 0; i < gridNumX; i++) {\n        // 标记地图中的障碍物\n        if (this.coord[i][j] === 'B' || this.coord[i][j] === 'T') {\n          graph.walls.push([i, j]);\n        }\n      }\n    }\n\n    const startPoint = this.orbit[0];\n    const endPoint = this.orbit[this.orbit.length - 1];\n    const bfs = new BreadthFirstSearch(graph, endPoint);\n    const pathArr = bfs.findPath(startPoint);\n    this.orbit = [];\n    pathArr.forEach((p) => this.orbit.push(p));\n\n    this.path = new Path({\n      ctx: this.ctx,\n      orbit: this.orbit,\n    });\n\n    // Add points to the path\n    this.path.setPoints();\n    this.setMap();\n  }\n\n  findPointPath([x, y]: [number, number]) {\n    const graph = this.graph;\n\n    const endPoint = this.orbit[this.orbit.length - 1];\n    const bfs = new BreadthFirstSearch(graph, endPoint);\n    const pathArr = bfs.findPath([x, y]);\n\n    return pathArr;\n  }\n\n  /**\n   * 检查在该位置放置障碍物后，起点和终点间是否存在一条路径，\n   * 以及所有的 enemy 是否能够到达终点\n   */\n  checkPath(col: number, row: number) {\n    const graph = new Graph(gridNumX, gridNumY);\n    for (let j = 0; j < gridNumY; j++) {\n      for (let i = 0; i < gridNumX; i++) {\n        // 标记地图中的障碍物\n        if (this.coord[i][j] === 'B' || this.coord[i][j] === 'T') {\n          graph.walls.push([i, j]);\n        }\n      }\n    }\n    graph.walls.push([col, row]);\n\n    const startPoint = this.orbit[0];\n    const endPoint = this.orbit[this.orbit.length - 1];\n    const bfs = new BreadthFirstSearch(graph, endPoint);\n    const startArr = bfs.findPath(startPoint);\n    if (startArr.length === 0) {\n      return false;\n    }\n\n    return this.game.enemies.every((enemy) => {\n      const { col, row } = px2Index(enemy.x, enemy.y);\n      if (col === endPoint[0] && row === endPoint[1]) {\n        return true;\n      }\n\n      const pathArr = bfs.findPath([col, row]);\n      return pathArr.length > 0;\n    });\n  }\n}\n\nexport default Map;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Map.ts","import { GRID_SIZE } from '@/constants';\nimport { index2Px } from '../utils';\n\nclass Path {\n  constructor(opt) {\n    this.ctx = opt.ctx;\n    this.radius = opt.radius || GRID_SIZE / 2;\n    this.orbit = opt.orbit;\n    this.points = [];\n  }\n\n  /**\n   * Add a point to path\n   */\n  addPoint(x, y) {\n    this.points.push([x, y]);\n  }\n\n  // Define path points\n  setPoints() {\n    this.orbit.forEach((coord) => {\n      const { x, y } = index2Px(...coord);\n      this.addPoint(x, y);\n    });\n  }\n\n  /**\n   * Render path\n   */\n  draw() {\n    if (this.points.length === 0) {\n      return;\n    }\n    const ctx = this.ctx;\n    const PATH_COLOR = '#333';\n    ctx.save();\n\n    ctx.beginPath();\n    ctx.lineJoin = 'round';\n    ctx.lineCap = 'round';\n    ctx.strokeStyle = PATH_COLOR;\n    ctx.lineWidth = (this.radius - 1) * 2;\n    ctx.shadowBlur = 0;\n\n    this.points.forEach((point) => {\n      ctx.lineTo(point[0], point[1]);\n    });\n\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.lineWidth = 1;\n    ctx.fillStyle = PATH_COLOR;\n    const startPoint = this.points[0];\n    ctx.arc(\n      startPoint[0],\n      startPoint[1],\n      this.radius,\n      0 * Math.PI,\n      2 * Math.PI,\n      false\n    );\n    ctx.fill();\n\n    // Draw a line in the middle of the path\n    ctx.strokeStyle = '#111';\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    this.points.forEach((point) => {\n      ctx.lineTo(point[0], point[1]);\n    });\n    ctx.stroke();\n\n    // 标记终点\n    ctx.beginPath();\n    ctx.fillStyle = 'tomato';\n    const endPoint = this.points[this.points.length - 1];\n    ctx.arc(\n      endPoint[0],\n      endPoint[1],\n      this.radius * 0.6,\n      0 * Math.PI,\n      2 * Math.PI,\n      false\n    );\n    ctx.fill();\n\n    ctx.restore();\n  }\n}\n\nexport default Path;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Path.js","export class Graph {\n  constructor(w, h) {\n    this.width = w;\n    this.height = h;\n    this.walls = []; // 障碍物\n  }\n\n  /**\n   * @param {*} node: [x, y]\n   */\n  inBounds(node) {\n    return (\n      0 <= node[0] &&\n      node[0] < this.width &&\n      0 <= node[1] &&\n      node[1] < this.height\n    );\n  }\n\n  /**\n   * 检查给定的一个点是否上有障碍物\n   * 即给定点的坐标与障碍物数组中的任意元素坐标均不等\n   */\n  passable(node) {\n    const walls = this.walls;\n    return walls.every((wall) => {\n      return wall[0] !== node[0] || wall[1] !== node[1];\n    });\n  }\n\n  neighbors(node) {\n    const [x, y] = node;\n    let results = [\n      [x + 1, y],\n      [x, y - 1],\n      [x - 1, y],\n      [x, y + 1],\n    ];\n    results = results.filter(this.passable, this);\n    results = results.filter(this.inBounds, this);\n    return results;\n  }\n\n  /**\n   * 输出 Graph 的信息\n   * 障碍物所在处标记为'#'，可通过区域标记为'.'\n   */\n  print() {\n    let info = '';\n    for (let j = 0; j < this.height; j++) {\n      for (let i = 0; i < this.width; i++) {\n        if (hasNode.call(this.walls, [i, j])) {\n          info += '#';\n        } else {\n          info += '.';\n        }\n      }\n      info += '\\n';\n    }\n    console.log(info);\n  }\n}\n\nclass Queue {\n  constructor() {\n    this.elements = [];\n  }\n\n  empty() {\n    return this.elements.length === 0;\n  }\n\n  put(x) {\n    this.elements.push(x);\n  }\n\n  get() {\n    return this.elements.shift();\n  }\n}\n\nexport class BreadthFirstSearch {\n  // 寻找graph上任一点到start的路径\n  constructor(graph, start) {\n    this.graph = graph;\n    this.width = graph.width;\n    this.height = graph.height;\n    this.start = start;\n\n    const frontier = new Queue();\n    frontier.put(start);\n\n    const visited = [start];\n\n    this.cameFrom = [];\n    this.distance = [];\n    for (let i = 0; i < this.width; i++) {\n      this.cameFrom[i] = [];\n      this.distance[i] = [];\n      for (let j = 0; j < this.height; j++) {\n        this.cameFrom[i][j] = null;\n        this.distance[i][j] = -1;\n      }\n    }\n\n    let current;\n    let curNeighbors = [];\n\n    while (!frontier.empty()) {\n      current = frontier.get();\n\n      curNeighbors = graph.neighbors(current);\n      curNeighbors.forEach((next) => {\n        if (!hasNode.call(visited, next)) {\n          frontier.put(next);\n          visited.push(next);\n          const [x, y] = next;\n          this.cameFrom[x][y] = current;\n          this.distance[x][y] = this.distance[current[0]][current[1]] + 1;\n        }\n      });\n    }\n  }\n\n  showPath() {\n    let info = '';\n    for (let j = 0; j < this.height; j++) {\n      for (let i = 0; i < this.width; i++) {\n        if (hasNode.call(this.graph.walls, [i, j])) {\n          info += '#\\t\\t';\n        } else {\n          info += this.cameFrom[i][j] + '\\t\\t';\n        }\n      }\n      info += '\\n';\n    }\n    console.log(info);\n  }\n\n  showDistance() {\n    let info = '';\n    for (let j = 0; j < this.height; j++) {\n      for (let i = 0; i < this.width; i++) {\n        if (hasNode.call(this.graph.walls, [i, j])) {\n          info += '#\\t';\n        } else {\n          info += this.distance[i][j] + '\\t';\n        }\n      }\n      info += '\\n';\n    }\n    console.log(info);\n  }\n\n  /**\n   * 最后生成的路径数组中，node为第一个元素，this.start为最后一个元素\n   */\n  findPath(node) {\n    const path = [];\n    let [curX, curY] = node;\n    // 如果需要查询的 node 恰等于 start，则将 start 返回\n    if (curX === this.start[0] && curY === this.start[1]) {\n      return [[curX, curY]];\n    }\n    if (this.cameFrom[curX][curY] === null) {\n      return [];\n    }\n    path.push(node);\n    while (curX !== this.start[0] || curY !== this.start[1]) {\n      const [x, y] = this.cameFrom[curX][curY];\n      path.push([x, y]);\n      curX = x;\n      curY = y;\n    }\n    return path;\n  }\n}\n\n/**\n * 用于检查一个数组中是否存在 arr\n * @param {array} node 是一个形如 [x, y] 的数组\n * 调用：hasNode.call(array, node)\n */\nfunction hasNode(node) {\n  return this.some((item) => item[0] === node[0] && item[1] === node[1]);\n}\n\nfunction removeNode(node) {\n  const index = this.find((item) => item[0] === node[0] && item[1] === node[1]);\n  if (index >= 0) {\n    this.splice(index, 1);\n    return true;\n  }\n  return false;\n}\n\n// const g = new Graph(10, 10);\n// var walls = [[1, 7], [1, 8], [2, 7], [2, 8], [3, 7], [3, 8], [0,0],[6,2], [6,3], [6,4]];\n// for (var i = 0; i < walls.length; i++) {\n//     g.walls.push(walls[i]);\n// }\n// g.print();\n\n// var bfs = new BreadthFirstSearch(g, [5,8]);\n// bfs.showDistance();\n// bfs.showPath();\n// var path11 = bfs.findPath([1,1]);\n// console.log(path11);\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/BreadthFirstSearch.js","interface EneyInitCnt {\n  a: number;\n  b: number;\n  c: number;\n  [propName: string]: number;\n}\n\ninterface EnemyCnt {\n  a?: number;\n  b?: number;\n  c?: number;\n  [propName: string]: number;\n}\n\ninterface EnemyCfgItem {\n  radius: number;\n  speed: number;\n  color: string;\n  health: number;\n}\n\nexport default class Wave {\n  enemyInitCnt: EneyInitCnt;\n  enemyCnt: EnemyCnt;\n  enemyCfg: { [propName: string]: EnemyCfgItem };\n\n  constructor(opt: any = {}) {\n    this.enemyInitCnt = opt.enemyInitCnt || {\n      a: 10,\n      b: 5,\n      c: 10,\n    };\n\n    this.enemyCnt = {};\n    Object.keys(this.enemyInitCnt).forEach((key) => {\n      this.enemyCnt[key] = this.enemyInitCnt[key];\n    });\n\n    this.enemyCfg = {\n      a: {\n        radius: 10,\n        speed: 1,\n        color: '#FFDDA0',\n        health: 20,\n      },\n      b: {\n        radius: 8,\n        speed: 1.5,\n        color: '#0280B2',\n        health: 16,\n      },\n      c: {\n        radius: 6,\n        speed: 2,\n        color: '#FFD387',\n        health: 12,\n      },\n    };\n  }\n\n  /**\n   * Check if all kinds of enemies are dead\n   */\n  waveFinish() {\n    const keys = Object.keys(this.enemyCnt);\n    return keys.every((key) => {\n      return this.enemyCnt[key] <= 0;\n    });\n  }\n\n  generateEnemy() {\n    if (this.waveFinish()) {\n      return -1;\n    } else {\n      const keys = Object.keys(this.enemyCnt);\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (this.enemyCnt[key] > 0) {\n          this.enemyCnt[key]--;\n          return this.enemyCfg[key];\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Wave.ts","// 在画面上显示信息\n\n// 属性：\n// 文字内容\n// 位置，大小\n// 颜色\n// type: 提示信息和错误信息需要显示在不同的 canvas 层上\n\nconst canvas = document.getElementById('error-message') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d');\n\ninterface Option {\n  text: string;\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n}\n\ninterface Message extends Option {\n  life: number;\n  vanish: boolean;\n  startTime: number;\n}\n\nclass Message implements Option {\n  constructor(opt: Option) {\n    this.text = opt.text;\n    this.x = opt.x || 0;\n    this.y = opt.y || canvas.height - 15;\n    this.width = opt.width || 0;\n    this.height = opt.height || 0;\n\n    this.life = 2000; // 信息存在的时长\n    this.startTime = new Date().getTime(); // 信息开始显示的时间\n\n    this.vanish = false;\n  }\n\n  draw() {\n    if (new Date().getTime() - this.startTime > this.life) {\n      this.vanish = true;\n    }\n\n    if (this.vanish) {\n      return;\n    }\n\n    ctx.fillStyle = 'red';\n    ctx.font = '20px Arial';\n\n    if (this.text) {\n      ctx.fillText(this.text, 50, this.y);\n    }\n  }\n}\n\nexport default Message;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/Message.ts","import { BaseTower, LaserTower, SlowTower, FireTower, Block } from './towers';\nimport { isInside, highlightGrid, drawGrid } from '../utils';\nimport {\n  GAME_CONTROL_WIDTH,\n  GAME_CONTROL_HEIGHT,\n  towerData,\n} from '@/constants';\nimport Game from '@/Game';\n\nconst GRID_WIDTH = 60;\nconst GRID_HEIGHT = 60;\nconst GRID_NUM_X = 3;\nconst GRID_NUM_Y = 2;\nconst WIDTH = GAME_CONTROL_WIDTH; // 230\nconst HEIGHT = GAME_CONTROL_HEIGHT; // 640\n\nconst FILL_COLOR = '#fafafa';\nconst DISABLE_COLOR = '#aaa';\nconst HOVER_COLOR = 'red';\n\n// 每一个子数组代表一列\nconst TOWER_TYPE = [['BASE', 'FIRE'], ['LASER'], ['SLOW', 'BLOCK']];\n\ninterface Option {\n  element: HTMLCanvasElement;\n  game: Game;\n  offsetX: number;\n  offsetY: number;\n}\n\ninterface GameControl extends Option {\n  option: Option;\n  ctx: CanvasRenderingContext2D;\n  towerAreaRect: {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  }\n  pauseBtn: any;\n  upgradeBtn: any;\n  sellBtn: any;\n  towerArea: TowerArea;\n  animId: number;\n}\n\nclass GameControl implements Option {\n  constructor(opt: Option) {\n    this.option = Object.assign(\n      {\n        offsetX: 25,\n        offsetY: 25,\n      },\n      opt\n    );\n\n    const element = this.option.element;\n    this.game = opt.game;\n\n    element.width = WIDTH;\n    element.height = HEIGHT;\n    this.element = element;\n\n    this.ctx = element.getContext('2d');\n    this.offsetX = this.option.offsetX;\n    this.offsetY = this.option.offsetY;\n\n    this.towerAreaRect = {\n      x: this.offsetX,\n      y: this.offsetY,\n      width: GRID_NUM_X * GRID_WIDTH,\n      height: GRID_NUM_Y * GRID_HEIGHT,\n    };\n\n    const commonBtnProp = {\n      x: this.offsetX,\n      width: 100,\n      height: 40,\n      status: '',\n    };\n\n    this.pauseBtn = {\n      y: 350,\n      text: '暂停',\n      ...commonBtnProp,\n    };\n\n    this.upgradeBtn = {\n      y: 410,\n      text: '升级',\n      disable: true,\n      ...commonBtnProp,\n    };\n\n    this.sellBtn = {\n      y: 470,\n      text: '出售',\n      disable: true,\n      ...commonBtnProp,\n    };\n\n    this.towerArea = new TowerArea({\n      ctx: this.ctx,\n      x: this.offsetX,\n      y: this.offsetY,\n    });\n\n    this.bindEvent();\n  }\n\n  draw() {\n    // 游戏未开始时，不绘制该区域\n    if (this.game.status === '') {\n      return;\n    }\n\n    const ctx = this.ctx;\n    // ctx.fillStyle = '#eee';\n    ctx.fillStyle = '#010c12';\n    ctx.fillRect(0, 0, WIDTH, HEIGHT);\n    this.drawGrid();\n\n    if (this.game.mode !== 'ADD_TOWER') {\n      // @ts-ignore\n      this.towerArea.selected = -1;\n    }\n    this.towerArea.draw();\n    this.drawText();\n    this.drawButton();\n    this.drawSelectedTowerInfo();\n\n    this.animId = requestAnimationFrame(() => this.draw());\n  }\n\n  // Not used?\n  stopAnim() {\n    cancelAnimationFrame(this.animId);\n    const ctx = this.ctx;\n    ctx.fillStyle = '#010c12';\n    ctx.fillRect(0, 0, WIDTH, HEIGHT);\n  }\n\n  drawGrid() {\n    const ctx = this.ctx;\n    ctx.strokeStyle = '#000';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(WIDTH, 0);\n    ctx.lineTo(WIDTH, HEIGHT);\n    ctx.lineTo(0, HEIGHT);\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  drawText() {\n    const ctx = this.ctx;\n    const game = this.game;\n    ctx.fillStyle = FILL_COLOR;\n    ctx.font = '20px Arial';\n    ctx.fillText(`第 ${game.wave + 1} 波`, this.offsetX, 200);\n    ctx.fillText(`生命: ${game.life}`, this.offsetX, 240);\n    ctx.fillText('得分: ' + game.score, this.offsetX, 280);\n    ctx.fillText('金钱: ' + game.money, this.offsetX, 320);\n  }\n\n  drawButton() {\n    const ctx = this.ctx;\n\n    [this.sellBtn, this.upgradeBtn].forEach(\n      (b) => (b.disable = !this.game.towerSelect)\n    );\n\n    [this.pauseBtn, this.sellBtn, this.upgradeBtn].forEach((btn) => {\n      if (btn.disable) {\n        /* 按钮当前处于不可用状态 */\n        ctx.strokeStyle = DISABLE_COLOR;\n        ctx.fillStyle = DISABLE_COLOR;\n      } else if (btn.status === 'hover') {\n        ctx.strokeStyle = HOVER_COLOR;\n        ctx.fillStyle = HOVER_COLOR;\n      } else {\n        ctx.strokeStyle = FILL_COLOR;\n        ctx.fillStyle = FILL_COLOR;\n      }\n      ctx.strokeRect(btn.x, btn.y, btn.width, btn.height);\n      ctx.fillText(btn.text, btn.x + btn.width / 3.5, btn.y + btn.height / 1.6);\n    });\n  }\n\n  drawSelectedTowerInfo() {\n    const game = this.game;\n    if (!game.towerSelect) {\n      return;\n    }\n    const ctx = this.ctx;\n    const tower = game.towers[game.towerSelectIndex];\n\n    ctx.fillStyle = FILL_COLOR;\n    ctx.font = '18px Arial';\n    ctx.fillText(`当前等级: ${tower.level}`, this.offsetX, 560);\n    ctx.fillText(`攻击: ${tower.damage.toFixed(2)}`, this.offsetX, 585);\n  }\n\n  // 在游戏的控制区域绑定事件\n  bindEvent() {\n    const $element = $(this.option.element);\n    const game = this.game;\n    let x = 0;\n    let y = 0;\n\n    // 点击事件的绑定\n    $element.click((e) => {\n      const $canvas = $(e.target);\n      const offset = $canvas.offset();\n      x = e.clientX - offset.left;\n      y = e.clientY - offset.top;\n\n      // 检查点击位置是否在 tower area 内\n      if (isInside({ x, y }, this.towerAreaRect)) {\n        const xIdx = Math.floor((x - this.offsetX) / GRID_WIDTH);\n        const yIdx = Math.floor((y - this.offsetY) / GRID_HEIGHT);\n\n        if (TOWER_TYPE[xIdx][yIdx]) {\n          if (\n            game.mode === 'ADD_TOWER' &&\n            game.addTowerType === TOWER_TYPE[xIdx][yIdx]\n          ) {\n            /* 添加塔模式下，点击同一种类的塔，则取消添加状态 */\n            game.mode = '';\n            game.addTowerType = '';\n          } else {\n            /* 进入添加塔模式，或切换塔的种类 */\n            game.mode = 'ADD_TOWER';\n            game.addTowerType = TOWER_TYPE[xIdx][yIdx];\n            this.towerArea.selected = [xIdx, yIdx];\n          }\n        }\n      } else {\n        this.towerArea.selected = -1;\n      }\n\n      if (isInside({ x, y }, this.pauseBtn)) {\n        this.pauseBtn.text = game.status === 'running' ? '继续' : '暂停';\n        game.status = game.status === 'running' ? 'pause' : 'running';\n        if (game.status === 'running') {\n          game.draw();\n        }\n      }\n\n      if (isInside({ x, y }, this.sellBtn)) {\n        if (game.towerSelect === true) {\n          console.log('you sell a tower');\n          game.sellTower();\n        }\n      }\n\n      if (isInside({ x, y }, this.upgradeBtn)) {\n        if (game.towerSelect === true) {\n          game.upgradeTower();\n        }\n      }\n    });\n\n    // hover 事件的绑定\n    $element.mousemove((e) => {\n      // e.stopPropagation()\n      const gameInfo = this.game.gameInfo;\n      const pauseBtn = this.pauseBtn;\n      const sellBtn = this.sellBtn;\n\n      const $canvas = $(e.target);\n      const offset = $canvas.offset();\n      x = e.clientX - offset.left;\n      y = e.clientY - offset.top;\n\n      // 鼠标hover在暂停按钮上\n      if (isInside({ x, y }, pauseBtn)) {\n        pauseBtn.status = 'hover';\n      } else {\n        pauseBtn.status = '';\n      }\n\n      if (isInside({ x, y }, sellBtn)) {\n        sellBtn.status = 'hover';\n      } else {\n        sellBtn.status = '';\n      }\n\n      // 鼠标 hover 在 tower 上时，显示相应提示信息\n      if (isInside({ x, y }, this.towerAreaRect)) {\n        const col = Math.floor((x - this.offsetX) / GRID_WIDTH);\n        const row = Math.floor((y - this.offsetY) / GRID_HEIGHT);\n\n        let infoX = this.offsetX + col * GRID_WIDTH - 100;\n\n        const towerType = TOWER_TYPE[col][row];\n        const text = [];\n        if (towerType) {\n          const data = towerData[towerType];\n          const tower = this.towerArea.towers[towerType];\n          text.push(data.info);\n          text.push(`造价: ${data.cost}`);\n          text.push(`攻击: ${tower.damage}`);\n        }\n        // TODO: 修改此处，使其更通用\n        if (row === 0 && col === 2) {\n          infoX -= 120;\n        } else if (row === 1 && col === 0) {\n          infoX -= 50;\n        }\n\n        gameInfo.infos = [\n          {\n            x: infoX,\n            y: this.offsetY + row * GRID_HEIGHT,\n            width: 200,\n            height: 50,\n            // @ts-ignore\n            text,\n          },\n        ];\n      } else {\n        gameInfo.infos = [];\n      }\n    });\n  }\n}\n\nexport default GameControl;\n\n\ninterface TowerAreaOption {\n  ctx: CanvasRenderingContext2D;\n  x: number;\n  y: number;\n}\n\ninterface TowerArea extends TowerAreaOption {\n  selected: -1 | [number, number];\n  offsetX: number;\n  offsetY: number;\n  towers: any;\n};\n\nclass TowerArea implements TowerAreaOption {\n  constructor(opt: TowerAreaOption) {\n    this.ctx = opt.ctx;\n    this.selected = -1;\n    this.offsetX = opt.x;\n    this.offsetY = opt.y;\n\n    const baseTower = new BaseTower({\n      x: this.offsetX + GRID_WIDTH / 2 + 10,\n      y: this.offsetY + GRID_HEIGHT / 2,\n      ctx: this.ctx,\n      radius: 12,\n    });\n\n    const laserTower = new LaserTower({\n      x: this.offsetX + GRID_WIDTH * 1.5 + 5,\n      y: this.offsetY + GRID_HEIGHT / 2,\n      ctx: this.ctx,\n      direction: 90,\n      radius: 10,\n    });\n\n    const slowTower = new SlowTower({\n      x: this.offsetX + GRID_WIDTH * 2.5 + 5,\n      y: this.offsetY + GRID_HEIGHT / 2,\n      ctx: this.ctx,\n      radius: 12,\n    });\n\n    const fireTower = new FireTower({\n      x: this.offsetX + GRID_WIDTH / 2 + 5,\n      y: this.offsetY + GRID_HEIGHT * 1.5,\n      ctx: this.ctx,\n      radius: 10,\n    });\n\n    const block = new Block({\n      x: this.offsetX + GRID_WIDTH * 2.5,\n      y: this.offsetY + GRID_HEIGHT * 1.5,\n      ctx: this.ctx,\n      radius: 0,\n    });\n\n    this.towers = {\n      BASE: baseTower,\n      LASER: laserTower,\n      SLOW: slowTower,\n      FIRE: fireTower,\n      BLOCK: block,\n    };\n  }\n\n  draw() {\n    const ctx = this.ctx;\n    ctx.strokeStyle = FILL_COLOR;\n    ctx.lineWidth = 1;\n\n    drawGrid(\n      ctx,\n      GRID_NUM_X,\n      GRID_NUM_Y,\n      GRID_WIDTH,\n      FILL_COLOR,\n      this.offsetX,\n      this.offsetY\n    );\n\n    if (this.selected !== -1) {\n      this.highlightTower(this.selected[0], this.selected[1]);\n    }\n\n    Object.keys(this.towers).forEach((key) => {\n      this.towers[key].draw(ctx);\n    });\n  }\n\n  highlightTower(col: number, row: number) {\n    const x = col * GRID_WIDTH + this.offsetX;\n    const y = row * GRID_HEIGHT + this.offsetY;\n    highlightGrid(this.ctx, x, y, GRID_WIDTH, GRID_HEIGHT);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/GameControl.ts","import { WIDTH, HEIGHT, GAME_CONTROL_WIDTH } from '@/constants';\nimport Game from '@/Game';\n\ninterface Option {\n  element: HTMLCanvasElement;\n  game: Game;\n}\n\ninterface GameInfo extends Option {\n  infos: any[];\n  count: number;\n};\n\nclass GameInfo implements Option {\n  constructor(opt: Option) {\n    this.element = opt.element;\n    this.game = opt.game;\n\n    this.element.width = WIDTH + GAME_CONTROL_WIDTH;\n    this.element.height = HEIGHT;\n\n    this.infos = [\n      {\n        x: 100,\n        y: 100,\n        width: 100,\n        height: 100,\n      },\n    ];\n\n    this.count = 0;\n  }\n\n  draw() {\n    setTimeout(() => this.draw(), 300);\n\n    // 游戏未开始时，不显示提示信息\n    if (this.game.status === '') {\n      return;\n    }\n\n    const infos = this.infos;\n    const ctx = this.element.getContext('2d');\n\n    ctx.fillStyle = 'rgba(255, 255, 255, 0)';\n    ctx.clearRect(0, 0, this.element.width, this.element.height);\n\n    infos.forEach((info) => {\n      // const rect = [info.x, info.y, info.width, info.height];\n      ctx.font = '20px Arial';\n\n      if (info.text && info.text.length > 0) {\n        ctx.save();\n        ctx.fillStyle = 'rgba(0, 255, 0, 0.2)';\n        // 确定信息显示的位置\n        const textStartX = info.x + WIDTH;\n        // 确定信息的宽度\n        const textWidth = ctx.measureText(info.text).width;\n        // 画出信息显示时的背景\n        ctx.fillRect(\n          textStartX - 20,\n          info.y - 25,\n          textWidth + 40,\n          30 * info.text.length\n        );\n\n        ctx.fillStyle = 'rgba(255, 255, 255, 1)';\n        info.text.forEach((t: string, idx: number) => {\n          const y = info.y + idx * 25;\n          ctx.fillText(t, textStartX, y);\n        });\n\n        ctx.restore();\n      }\n    });\n  }\n}\n\nexport default GameInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/GameInfo.ts","import { WIDTH, HEIGHT, GAME_CONTROL_WIDTH } from '@/constants';\nimport EntityCollection from '../EntityCollection';\n\ninterface Option {\n  element: any;\n  game: any;\n  messages: EntityCollection[];\n}\n\ninterface GameError extends Option {};\n\n/**\n * 显示在游戏画面左下角的错误信息\n */\nclass GameError {\n  constructor(opt: any) {\n    this.element = opt.element;\n    this.game = opt.game;\n\n    this.element.width = WIDTH + GAME_CONTROL_WIDTH;\n    this.element.height = HEIGHT;\n\n    this.messages = new EntityCollection();\n  }\n\n  draw() {\n    const messages = this.messages;\n    const canvas = this.element;\n    const ctx = canvas.getContext('2d');\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    this.messages = messages.filter((msg) => !msg.vanish);\n    this.messages.forEach((msg, index) => {\n      // 不同的消息在 y 方向上叠加\n      // TODO: y 方向的数值需要改变\n      msg.y = canvas.height - 15 - index * 30;\n      msg.draw();\n    });\n\n    setTimeout(() => {\n      this.draw();\n    }, 200);\n  }\n}\n\nexport default GameError;\n\n\n\n// WEBPACK FOOTER //\n// ./src/entities/GameError.ts","import beep from '../assets/audios/short.mp3';\n\nexport const beepAudio = new Audio(beep);\n\n\n\n// WEBPACK FOOTER //\n// ./src/audio.js","module.exports = __webpack_public_path__ + \"46cf373e4666b35178b0986a5d2b34b5.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/audios/short.mp3\n// module id = 41\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js!./index.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js!./index.less\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js!./index.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/index.less\n// module id = 42\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n  background: #eee;\\n  background: #010c12;\\n}\\nmain {\\n  display: flex;\\n  /*border: 1px solid;*/\\n}\\ncanvas#background {\\n  position: absolute;\\n  z-index: 0;\\n}\\ncanvas#drawing {\\n  border: 6px #333 solid;\\n  border-right: none;\\n  z-index: 1;\\n}\\ncanvas#game-control {\\n  border: 6px #333 solid;\\n  border-left: none;\\n  position: absolute;\\n}\\ncanvas#game-info {\\n  z-index: 3;\\n  pointer-events: none;\\n}\\ncanvas#error-message {\\n  z-index: 3;\\n  pointer-events: none;\\n  width: 1030px;\\n  height: 650px;\\n}\\n#add-tower {\\n  display: flex;\\n}\\n.add-tower-pic {\\n  width: 50px;\\n  height: 50px;\\n  background-color: #fff;\\n  display: inline-block;\\n  margin-left: 20px;\\n  border: 1px solid #000;\\n}\\n.ui {\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-size: 10px;\\n  color: #999;\\n  text-align: left;\\n  padding: 8px;\\n  background-color: rgba(0, 0, 0, 0.6);\\n}\\n#panels {\\n  width: 100%;\\n  position: absolute;\\n  z-index: 3;\\n  display: none;\\n}\\n#message {\\n  padding: 16px;\\n  margin-top: 10px;\\n  width: 300px;\\n}\\n.ui h2 {\\n  font-size: 24px;\\n  margin-bottom: 20px;\\n  color: #eee;\\n}\\n.ui ul {\\n  margin: 10px 0;\\n}\\n.ui ul li {\\n  margin: 0 0 2px 0;\\n}\\n.ui a {\\n  outline: none;\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-size: 38px;\\n  text-decoration: none;\\n  color: #bbb;\\n  display: block;\\n  transition: all 0.18s linear;\\n}\\n.ui a:hover {\\n  color: #fff;\\n  background-color: #000;\\n  transition: all 0.18s linear;\\n}\\n#choose-stage {\\n  width: 1030px;\\n  height: 640px;\\n  z-index: 10;\\n  color: #fff;\\n  text-align: center;\\n  background: #00080e;\\n  background: radial-gradient(#004646, #00080e);\\n}\\n.choose-stage-button {\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-size: 38px;\\n  color: #bbb;\\n  text-decoration: none;\\n  display: block;\\n  transition: all 0.18s linear;\\n  margin: 20px 0;\\n  padding: 10px 0;\\n}\\n.choose-stage-button:first-of-type {\\n  margin-top: 80px;\\n}\\n.choose-stage-button:hover {\\n  background-color: #000;\\n  transition: all 0.18s linear;\\n}\\n/* 游戏顶部状态信息 */\\n#status {\\n  width: 780px;\\n  height: 15px;\\n  padding: 8px;\\n  display: none;\\n  position: absolute;\\n  z-index: 2;\\n}\\n#status span {\\n  color: #bbb;\\n  font-weight: bold;\\n  margin-right: 5px;\\n}\\n#status .fps {\\n  float: right;\\n  margin-top: 0;\\n  margin-bottom: 0;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/less-loader/dist/cjs.js!./src/styles/index.less\n// module id = 43\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 44\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/addStyles.js\n// module id = 45\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/urls.js\n// module id = 46\n// module chunks = 0"],"sourceRoot":""}